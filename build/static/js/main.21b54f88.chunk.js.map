{"version":3,"sources":["utils/cookie.js","utils/axios.js","utils/chooseBooksAmount.js","webpack:///./src/assets/images/cartIcon.svg?be58","utils/totalPrice.js","utils/countAllBooks.js","models/Cart.js","utils/getCartValue.js","store/actionTypes.js","store/reducers/loginReducer.js","store/reducers/serverCommunicationReducer.js","store/reducers/modalsReducer.js","store/reducers/booksReducer.js","store/reducers/cartReducer.js","store/reducers/rootReducer.js","models/ResponseDebugger.js","models/RequestsSender.js","serverCommunication/serverCommunicationMethods.js","store/actions/loginActions.js","store/actions/serverCommunicationActions.js","store/actions/modalsActions.js","store/actions/booksActions.js","store/actions/cartActions.js","assets/colors.js","assets/images/error-icon.svg","assets/images/hide-error-message.svg","assets/images/logoutIcon.svg","assets/images/cartIcon.svg","assets/images/searchIcon.svg","assets/images/angleDownIcon.svg","assets/images/bookIcon.svg","assets/images/plusIcon.svg","assets/images/minusIcon.svg","assets/images/trash.svg","hoc/ErrorBoundary/style.js","hoc/ErrorBoundary/index.js","hoc/ErrorBoundary/ErrorBoundary.js","components/UI/Input/style.js","components/UI/Input/index.js","components/UI/Input/Input.js","components/UI/Button/style.js","components/UI/Button/index.js","components/UI/Button/Button.js","components/UI/Modal/style.js","components/UI/Modal/index.js","components/UI/Modal/Modal.js","components/UI/Select/style.js","components/UI/Select/index.js","components/UI/Select/Select.js","components/UI/Loader/style.js","components/UI/Loader/index.js","components/UI/Loader/Loader.js","pages/LoginPage/style.js","pages/LoginPage/index.js","pages/LoginPage/LoginPage.js","pages/LoginPage/getUserNameErrorMessage.js","utils/checkValidity.js","components/ConfirmLogoutModal/style.js","components/ConfirmLogoutModal/index.js","components/ConfirmLogoutModal/ConfirmLogoutModal.js","components/BooksCatalogFilters/filterBooksByPrice.js","components/BooksCatalogFilters/filterBooksByName.js","components/BooksCatalogFilters/style.js","components/BooksCatalogFilters/index.js","components/BooksCatalogFilters/BooksCatalogFilters.js","components/BookCard/style.js","components/BookCard/index.js","components/BookCard/BookCard.js","components/BookPriceCountInfo/disableAddingNewBooks.js","components/BookPriceCountInfo/style.js","components/BookPriceCountInfo/index.js","components/BookPriceCountInfo/BookPriceCountInfo.js","components/BookPriceCountInfo/getChangedBooksCount.js","components/CartItem/style.js","components/CartItem/index.js","components/CartItem/CartItem.js","components/ConfirmClearCartModal/style.js","components/ConfirmClearCartModal/index.js","components/ConfirmClearCartModal/ConfirmClearCartModal.js","components/AddedBookToCartModal/style.js","components/AddedBookToCartModal/index.js","components/AddedBookToCartModal/AddedBookToCartModal.js","components/BoughtCartItem/style.js","components/BoughtCartItem/index.js","components/BoughtCartItem/BoughtCartItem.js","components/PurchaseModal/style.js","components/PurchaseModal/index.js","components/PurchaseModal/PurchaseModal.js","layouts/HeaderLayout/style.js","layouts/HeaderLayout/index.js","layouts/HeaderLayout/HeaderLayout.js","pages/BooksCatalogPage/style.js","pages/BooksCatalogPage/index.js","pages/BooksCatalogPage/BooksCatalogPage.js","pages/BookInfoPage/style.js","pages/BookInfoPage/index.js","pages/BookInfoPage/BookInfoPage.js","pages/CartPage/style.js","pages/CartPage/index.js","pages/CartPage/CartPage.js","pages/NotFountPage/style.js","pages/NotFountPage/index.js","pages/NotFountPage/NotFountPage.js","App.js","globalStyles.js","reportWebVitals.js","index.js"],"names":["getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","value","options","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","setCookie","axios","BaseAxios","create","baseURL","interceptors","request","use","config","token","headers","_path","chooseBooksAmount","chosenAmountOfBooks","availableAmountOfBooks","action","countTotalPriceOfSameBooks","bookPrice","booksAmount","Math","round","countTotalPriceOfAllBooks","books","reduce","totalPrice","book","currentBookTotalPrice","countAllBooks","amount","addedCount","Cart","addedBooks","totalCount","addBookToCart","booksIds","Object","keys","newBook","title","price","availableCount","count","canUserIncreaseBooksCount","canUserDecreaseBooksCount","id","values","_instance","removeBookFromCart","bookId","filteredBooks","entries","filter","fromEntries","booksValues","editCountOfOneBookDuplicates","changedBooksDuplicatesAmount","clearCart","this","getCartValue","addedToCartBooks","JSON","parse","localStorage","getItem","START_LOGIN","LOGIN","LOGOUT","SHOW_RESPONSE_ERROR_MESSAGE","HIDE_RESPONSE_ERROR_MESSAGE","SHOW_CONFIRM_LOGOUT_MODAL","HIDE_CONFIRM_LOGOUT_MODAL","SHOW_CONFIRM_CLEAR_CART_MODAL","HIDE_CONFIRM_CLEAR_CART_MODAL","SHOW_ADDED_BOOK_TO_CART_MODAL","HIDE_ADDED_BOOK_TO_CART_MODAL","SHOW_PURCHASE_MODAL","HIDE_PURCHASE_MODAL","START_LOADING","SET_ALL_BOOKS","SET_CURRENT_BOOK_INFO","STOP_LOADING","ADD_NEW_BOOK_TO_CART","REMOVE_BOOK_FROM_CART","EDIT_BOOKS_COUNT","CLEAR_CART","SEND_PURCHASE_REQUEST","GET_PURCHASE_REQUEST","activeUser","initialState","isLoggedIn","isLoading","isResponseErrorMessageVisible","isConfirmLogoutModalVisible","isConfirmClearCartModalVisible","isAddedBookToCartModalVisible","isPurchaseModalVisible","allBooks","currentBookInfo","cart","purchaseMessage","updateCart","state","payload","rootReducer","combineReducers","login","type","serverCommunication","modals","ResponseDebugger","getResponse","dispatch","func","a","RequestsSender","userName","formData","username","post","stringify","showResponseErrorMessage","getAllBooks","get","logout","getCurrentBookInfo","purchase","booksList","purchaseData","serverCommunicationMethods","RequestSender","removeItem","hideResponseErrorMessage","hideConfirmLogoutModal","hideConfirmClearCartModal","hideAddedToCartBookModal","startLoading","stopLoading","actionCreator","changedCart","setItem","editBooksCount","editedBooks","emptyCart","colors","ErrorMessageWrapper","styled","div","show","MessageWrapper","ErrorIcon","img","Message","p","HideMessageButton","button","HideMessageIcon","ErrorBoundary","Component","useDispatch","useSelector","useEffect","closeMessageTimeOut","setTimeout","clearTimeout","src","errorIcon","onClick","hideErrorMessage","InputWrapper","Label","label","fieldType","isValid","isTouched","Field","input","ErrorMessage","SearchIcon","Input","props","placeholder","onChange","onBlur","searchIcon","errorMessage","ButtonElem","btnType","Button","children","ModalWrapper","ModalContentWrapper","Modal","SelectElem","select","Option","option","Select","Children","toArray","optionsArr","map","LoaderWrapper","Loader","color","LoginPageWrapper","LoginBlockWrapper","Title","h2","Form","form","SubmitButtonWrapper","LoginPage","useState","rules","required","minLength","maxLength","nameControl","setNameControl","getValidUserName","event","isBlurHandler","control","target","trim","length","checkValidity","preventDefault","response","data","userData","avatar","ButtonsWrapper","ButtonWrapper","ConfirmLogoutModal","filterBooksByPrice","push","filterBooksByName","toLowerCase","startsWith","FiltersSectionWrapper","OpenCloseFiltersWrapper","FiltersTitle","h3","OpenCloseFiltersButton","OpenCloseFiltersIcon","areFiltersVisible","FiltersWrapper","FilterFieldWrapper","BooksCatalogFilters","filterBooksFnc","window","innerWidth","setAreFiltersVisible","search","priceSelect","controls","setControls","searchChangeHandler","fields","filteredBooksByPrice","filterBooksByNameArr","prev","angleDownIcon","filteredBooksByName","filterBooksByPriceArr","CardWrapper","CardContentWrapper","BookCover","bookCover","BookName","BookAuthor","h4","PriceViewWrapper","Price","span","ViewButtonWrapper","BookCard","history","useHistory","cover","author","disableAddingNewBooksIfThereISNoCurrentBooks","setBooksCount","setCanIncreaseBooksCount","setTotalPrice","currentBookInCart","alreadyAddedCount","BookPriceCountInfoWrapper","InfoPartWrapper","InfoLabel","InfoValue","AddToCartButtonWrapper","CountValue","Count","IncreaseDecreaseButton","canIncreaseBooksAmount","canDecreaseBooksAmount","IncreaseDecreaseIcon","BookPriceCountInfo","booksCount","canIncreaseBooksCount","canDecreaseBooksCount","setCanDecreaseBooksCount","changeBooksAmountHandler","changedBooksCount","getChangedBooksCount","changedTotalPrice","plusIcon","minusIcon","newBooks","addNewBookToCart","CartItemWrapper","CartItemTitle","Link","CounterTotalPriceDeleteBookWrapper","BooksCounterWrapper","BooksCount","TotalPrice","TrashButton","TrashIcon","CartItem","to","booksListWithoutDeletedBook","deleteBookFromCart","trashIcon","ConfirmClearCartModal","AddedBookToCartModal","hideModalTimeout","BoughtCartItemWrapper","BookTitle","firstRow","TotalCountPriceWrapper","TotalCount","BoughtCartItem","PurchaseList","PurchaseModal","addedBooksToCartArr","_extends","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCartIcon","_ref","svgRef","titleId","focusable","className","role","xmlns","viewBox","ref","fill","d","ForwardRef","HeaderWrapper","Header","LogoWrapper","Logo","h1","ProfileLogoutCartWrapper","ProfileLogoutWrapper","LogoutButton","LogoutImg","UserName","UserAvatar","CartWrapper","CartImg","CartIcon","PurchasesAmountWrapper","PurchasesAmount","MiniScreensLogoWrapper","MiniScreensLogo","HeaderLayout","location","useLocation","goToCartPageHandler","pathname","goToCatalogPageHandler","logoutIcon","BooksCatalogPageWrapper","MainContentWrapper","BooksWrapper","NoBooksWrapper","BookImg","NoBookMessage","BooksCatalogPage","booksForRender","setBooksForRender","bookIcon","BookInfoPageWrapper","BookInfoWrapper","BookInfoContent","BookInfoPartWrapper","BookCoverAuthorLevelWrapper","Author","Level","TagsDescriptionWrapper","Description","DescriptionLabel","Tags","BookMiniInfoPart","BookMiniInfoWrapper","BookInfoPage","slice","bookInfo","isCurrentBookEmpty","BooksAuthorLevel","level","TagsDescription","tags","join","description","CartPageWrapper","EmptyCartBlockWrapper","EmptyCartMessage","CartPageContent","PurchaseButtonWrapper","CartItemsWrapper","EmptyTrashTotalCountPriceWrapper","EmptyTrashButtonWrapper","TotalCountPrice","CartPage","message","NotFountPageWrapper","NotFountPage","rootPathName","App","component","createGlobalStyle","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","compose","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.21b54f88.chunk.js","sourcesContent":["export const getCookie = (name) => {\r\n  const matches = document.cookie.match(new RegExp(\r\n    '(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1')\r\n    + '=([^;]*)'\r\n  ))\r\n  return matches ? decodeURIComponent(matches[1]) : undefined\r\n}\r\n\r\nconst setCookie = (name, value, options = {}) => {\r\n  options = {\r\n    path: '/',\r\n    ...options\r\n  }\r\n\r\n  if (options.expires instanceof Date) {\r\n    options.expires = options.expires.toUTCString()\r\n  }\r\n\r\n  let updatedCookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value)\r\n\r\n  for (const optionKey in options) {\r\n    updatedCookie += \"; \" + optionKey\r\n    const optionValue = options[optionKey]\r\n    if (optionValue !== true) {\r\n      updatedCookie += \"=\" + optionValue\r\n    }\r\n  }\r\n\r\n  document.cookie = updatedCookie\r\n}\r\n\r\nexport const deleteCookie = (name) => {\r\n  setCookie(name, \"\", {\r\n    'max-age': -1\r\n  })\r\n}","import BaseAxios from 'axios'\r\nimport {getCookie} from './cookie'\r\n\r\nexport const axios = BaseAxios.create({\r\n  baseURL: 'https://js-band-store-api.glitch.me'\r\n})\r\n\r\naxios.interceptors.request.use(\r\n  config => {\r\n    const token = getCookie('token')\r\n\r\n    config.headers = {\r\n      \"Authorization\": `Bearer ${token}`,\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n\r\n    return config\r\n  }\r\n)","export const chooseBooksAmount = (\r\n  chosenAmountOfBooks,\r\n  availableAmountOfBooks,\r\n  action\r\n) => {\r\n  switch (action) {\r\n    case 'add':\r\n      if (chosenAmountOfBooks < availableAmountOfBooks) {\r\n        return chosenAmountOfBooks + 1\r\n      } else {\r\n        return chosenAmountOfBooks\r\n      }\r\n    case 'remove':\r\n      if (chosenAmountOfBooks > 1) {\r\n        return chosenAmountOfBooks - 1\r\n      } else {\r\n        return chosenAmountOfBooks\r\n      }\r\n    default:\r\n      return chosenAmountOfBooks\r\n  }\r\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCartIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"shopping-getCartValue\",\n    className: \"svg-inline--fa fa-shopping-getCartValue fa-w-18\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 576 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"current\",\n    d: \"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCartIcon);\nexport default __webpack_public_path__ + \"static/media/cartIcon.6165a8fa.svg\";\nexport { ForwardRef as ReactComponent };","export const countTotalPriceOfSameBooks = (bookPrice, booksAmount) => {\r\n  return Math.round((bookPrice * booksAmount) * 100) / 100\r\n}\r\n\r\nexport const countTotalPriceOfAllBooks = (books) => {\r\n  return books.reduce((totalPrice, book) => {\r\n    return Math.round((totalPrice + book.currentBookTotalPrice) * 100) / 100\r\n  }, 0)\r\n}","export const countAllBooks = (books) => {\r\n  return books.reduce((amount, book) => amount + book.addedCount, 0)\r\n}","import {\r\n  chooseBooksAmount,\r\n  countTotalPriceOfSameBooks,\r\n  countTotalPriceOfAllBooks,\r\n  countAllBooks\r\n} from 'utils'\r\n\r\nclass Cart {\r\n  constructor(addedBooks, totalPrice, totalCount) {\r\n    if (Cart._instance) {\r\n      return Cart._instance\r\n    }\r\n    Cart._instance = this\r\n\r\n    this.addedBooks = addedBooks\r\n    this.totalPrice = totalPrice\r\n    this.totalCount = totalCount\r\n  }\r\n\r\n  addBookToCart = (book, addedCount, currentBookTotalPrice) => {\r\n    const booksIds = Object.keys(this.addedBooks)\r\n\r\n    const newBook = {\r\n      title: book.title,\r\n      price: book.price,\r\n      availableCount: book.count,\r\n      canUserIncreaseBooksCount: addedCount !== book.count,\r\n      canUserDecreaseBooksCount: addedCount !== 1,\r\n      addedCount,\r\n      currentBookTotalPrice\r\n    }\r\n\r\n    if (booksIds) {\r\n      if (!this.addedBooks[book.id]) {\r\n        this.addedBooks[book.id] = newBook\r\n      } else {\r\n        this.addedBooks[book.id].addedCount += addedCount\r\n        this.addedBooks[book.id].currentBookTotalPrice = countTotalPriceOfSameBooks(\r\n          this.addedBooks[book.id].price,\r\n          this.addedBooks[book.id].addedCount\r\n        )\r\n\r\n        this.addedBooks[book.id].canUserIncreaseBooksCount = this.addedBooks[book.id].addedCount\r\n          !== this.addedBooks[book.id].availableCount\r\n        this.addedBooks[book.id].canUserDecreaseBooksCount = this.addedBooks[book.id].addedCount\r\n          !== 1\r\n      }\r\n    } else {\r\n      this.addedBooks[book.id] = newBook\r\n    }\r\n\r\n    const books = Object.values(this.addedBooks)\r\n    this.totalPrice = countTotalPriceOfAllBooks(books)\r\n    this.totalCount = countAllBooks(books)\r\n\r\n    return Cart._instance\r\n  }\r\n\r\n  removeBookFromCart = (bookId) => {\r\n    const booksEntries = Object.entries(this.addedBooks)\r\n    const filteredBooks = booksEntries.filter(book => +book[0] !== +bookId)\r\n    this.addedBooks = Object.fromEntries(filteredBooks)\r\n\r\n    const booksValues = Object.values(this.addedBooks)\r\n    this.totalPrice = countTotalPriceOfAllBooks(booksValues)\r\n    this.totalCount = countAllBooks(booksValues)\r\n\r\n    return Cart._instance\r\n  }\r\n\r\n  editCountOfOneBookDuplicates = (bookId, action) => {\r\n    const changedBooksDuplicatesAmount = chooseBooksAmount(\r\n      this.addedBooks[bookId].addedCount,\r\n      this.addedBooks[bookId].availableCount,\r\n      action\r\n    )\r\n\r\n    const {availableCount} = this.addedBooks[bookId]\r\n\r\n    const canUserIncreaseBooksCount = changedBooksDuplicatesAmount !== availableCount\r\n\r\n    const canUserDecreaseBooksCount = changedBooksDuplicatesAmount !== 1\r\n\r\n    this.addedBooks[bookId].canUserIncreaseBooksCount = canUserIncreaseBooksCount\r\n    this.addedBooks[bookId].canUserDecreaseBooksCount = canUserDecreaseBooksCount\r\n\r\n    this.addedBooks[bookId].addedCount = changedBooksDuplicatesAmount\r\n    this.addedBooks[bookId].currentBookTotalPrice = countTotalPriceOfSameBooks(\r\n      this.addedBooks[bookId].price,\r\n      changedBooksDuplicatesAmount\r\n    )\r\n\r\n    const books = Object.values(this.addedBooks)\r\n    this.totalPrice = countTotalPriceOfAllBooks(books)\r\n    this.totalCount = countAllBooks(books)\r\n\r\n    return Cart._instance\r\n  }\r\n\r\n  clearCart = () => {\r\n    this.addedBooks = {}\r\n    this.totalPrice = 0\r\n    this.totalCount = 0\r\n\r\n    return Cart._instance\r\n  }\r\n}\r\n\r\nexport default Cart","import Cart from 'models/Cart'\r\n\r\nexport const getCartValue = () => {\r\n  const addedToCartBooks = JSON.parse(localStorage.getItem('addedToCartBooks'))\r\n\r\n  if (addedToCartBooks) {\r\n    return new Cart(\r\n      addedToCartBooks.addedBooks,\r\n      addedToCartBooks.totalPrice,\r\n      addedToCartBooks.totalCount\r\n    )\r\n  } else {\r\n    return new Cart({}, 0, 0)\r\n  }\r\n}","export const START_LOGIN = 'START_LOGIN'\r\nexport const LOGIN = 'LOGIN'\r\nexport const LOGOUT = 'LOGOUT'\r\n\r\nexport const SHOW_RESPONSE_ERROR_MESSAGE = 'SHOW_RESPONSE_ERROR_MESSAGE'\r\nexport const HIDE_RESPONSE_ERROR_MESSAGE = 'HIDE_RESPONSE_ERROR_MESSAGE'\r\n\r\nexport const SHOW_CONFIRM_LOGOUT_MODAL = 'SHOW_CONFIRM_LOGOUT_MODAL'\r\nexport const HIDE_CONFIRM_LOGOUT_MODAL = 'HIDE_CONFIRM_LOGOUT_MODAL'\r\nexport const SHOW_CONFIRM_CLEAR_CART_MODAL = 'SHOW_CONFIRM_CLEAR_CART_MODAL'\r\nexport const HIDE_CONFIRM_CLEAR_CART_MODAL = 'HIDE_CONFIRM_CLEAR_CART_MODAL'\r\nexport const SHOW_ADDED_BOOK_TO_CART_MODAL = 'SHOW_ADDED_BOOK_TO_CART_MODAL'\r\nexport const HIDE_ADDED_BOOK_TO_CART_MODAL = 'HIDE_ADDED_BOOK_TO_CART_MODAL'\r\nexport const SHOW_PURCHASE_MODAL = 'SHOW_PURCHASE_MODAL'\r\nexport const HIDE_PURCHASE_MODAL = 'HIDE_PURCHASE_MODAL'\r\n\r\nexport const START_LOADING = 'START_LOADING'\r\nexport const SET_ALL_BOOKS = 'GET_ALL_BOOKS'\r\nexport const SET_CURRENT_BOOK_INFO = 'SET_CURRENT_BOOK_INFO'\r\nexport const STOP_LOADING = 'STOP_LOADING'\r\n\r\nexport const ADD_NEW_BOOK_TO_CART = 'ADD_NEW_BOOK_TO_CART'\r\nexport const REMOVE_BOOK_FROM_CART = 'REMOVE_BOOK_FROM_CART'\r\nexport const EDIT_BOOKS_COUNT = 'EDIT_BOOKS_COUNT'\r\nexport const CLEAR_CART = 'CLEAR_CART'\r\nexport const SEND_PURCHASE_REQUEST = 'SEND_PURCHASE_REQUEST'\r\nexport const GET_PURCHASE_REQUEST = 'GET_PURCHASE_REQUEST'\r\nexport const SET_PURCHASE_MESSAGE = ''\r\nexport const CLEAR_PURCHASE_MESSAGE = ''","import {getCookie} from 'utils'\r\nimport {START_LOGIN, LOGIN, LOGOUT} from '../actionTypes'\r\n\r\nconst token = getCookie('token')\r\nconst activeUser = JSON.parse(localStorage.getItem('activeUser'))\r\n\r\nconst initialState = {\r\n  isLoggedIn: !!token && !!activeUser,\r\n  isLoading: false\r\n}\r\n\r\nexport const loginReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case START_LOGIN:\r\n      return {...state, isLoading: true}\r\n    case LOGIN:\r\n      return {...state, isLoggedIn: true, isLoading: false}\r\n    case LOGOUT:\r\n      return {...state, isLoggedIn: false}\r\n    default:\r\n      return state\r\n  }\r\n}","import {\r\n  SHOW_RESPONSE_ERROR_MESSAGE,\r\n  HIDE_RESPONSE_ERROR_MESSAGE\r\n} from '../actionTypes'\r\n\r\nconst initialState = {\r\n  isResponseErrorMessageVisible: false\r\n}\r\n\r\nexport const serverCommunicationReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SHOW_RESPONSE_ERROR_MESSAGE:\r\n      return {...state, isResponseErrorMessageVisible: true}\r\n    case HIDE_RESPONSE_ERROR_MESSAGE:\r\n      return {...state, isResponseErrorMessageVisible: false}\r\n    default:\r\n      return state\r\n  }\r\n}","import {\r\n  SHOW_CONFIRM_LOGOUT_MODAL,\r\n  HIDE_CONFIRM_LOGOUT_MODAL,\r\n  SHOW_CONFIRM_CLEAR_CART_MODAL,\r\n  HIDE_CONFIRM_CLEAR_CART_MODAL,\r\n  SHOW_ADDED_BOOK_TO_CART_MODAL,\r\n  HIDE_ADDED_BOOK_TO_CART_MODAL,\r\n  SHOW_PURCHASE_MODAL,\r\n  HIDE_PURCHASE_MODAL\r\n} from '../actionTypes'\r\n\r\nconst initialState = {\r\n  isConfirmLogoutModalVisible: false,\r\n  isConfirmClearCartModalVisible: false,\r\n  isAddedBookToCartModalVisible: false,\r\n  isPurchaseModalVisible: false\r\n}\r\n\r\nexport const modalsReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SHOW_CONFIRM_LOGOUT_MODAL:\r\n      return {...state, isConfirmLogoutModalVisible: true}\r\n    case HIDE_CONFIRM_LOGOUT_MODAL:\r\n      return {...state, isConfirmLogoutModalVisible: false}\r\n    case SHOW_CONFIRM_CLEAR_CART_MODAL:\r\n      return {...state, isConfirmClearCartModalVisible: true}\r\n    case HIDE_CONFIRM_CLEAR_CART_MODAL:\r\n      return {...state, isConfirmClearCartModalVisible: false}\r\n    case SHOW_ADDED_BOOK_TO_CART_MODAL:\r\n      return {...state, isAddedBookToCartModalVisible: true}\r\n    case HIDE_ADDED_BOOK_TO_CART_MODAL:\r\n      return {...state, isAddedBookToCartModalVisible: false}\r\n    case SHOW_PURCHASE_MODAL:\r\n      return {...state, isPurchaseModalVisible: true}\r\n    case HIDE_PURCHASE_MODAL:\r\n      return {...state, isPurchaseModalVisible: false}\r\n    default:\r\n      return state\r\n  }\r\n}","import {\r\n  START_LOADING,\r\n  SET_ALL_BOOKS,\r\n  STOP_LOADING,\r\n  SET_CURRENT_BOOK_INFO\r\n} from '../actionTypes'\r\n\r\nconst initialState = {\r\n  isLoading: true,\r\n  allBooks: [],\r\n  currentBookInfo: {}\r\n}\r\n\r\nexport const booksReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case START_LOADING:\r\n      return {...state, isLoading: true}\r\n    case SET_ALL_BOOKS:\r\n      return {...state, allBooks: action.payload}\r\n    case STOP_LOADING:\r\n      return {...state, isLoading: false}\r\n    case SET_CURRENT_BOOK_INFO:\r\n      return {...state, currentBookInfo: action.payload}\r\n    default:\r\n      return state\r\n  }\r\n}","import {getCartValue} from 'utils'\r\nimport {\r\n  ADD_NEW_BOOK_TO_CART,\r\n  REMOVE_BOOK_FROM_CART,\r\n  EDIT_BOOKS_COUNT,\r\n  CLEAR_CART,\r\n  SEND_PURCHASE_REQUEST,\r\n  GET_PURCHASE_REQUEST,\r\n  SET_PURCHASE_MESSAGE,\r\n  CLEAR_PURCHASE_MESSAGE\r\n} from '../actionTypes'\r\n\r\nconst cart = getCartValue()\r\n\r\nconst initialState = {\r\n  addedBooks: cart.addedBooks,\r\n  totalPrice: cart.totalPrice,\r\n  totalCount: cart.totalCount,\r\n  purchaseMessage: '',\r\n  isLoading: false\r\n}\r\n\r\nconst updateCart = (state, action) => {\r\n  return {\r\n    ...state,\r\n    addedBooks: action.payload.addedBooks,\r\n    totalPrice: action.payload.totalPrice,\r\n    totalCount: action.payload.totalCount\r\n  }\r\n}\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_NEW_BOOK_TO_CART:\r\n      return updateCart(state, action)\r\n    case EDIT_BOOKS_COUNT:\r\n      return updateCart(state, action)\r\n    case REMOVE_BOOK_FROM_CART:\r\n      return updateCart(state, action)\r\n    case CLEAR_CART:\r\n      return updateCart(state, action)\r\n    case SEND_PURCHASE_REQUEST:\r\n      return {...state, isLoading: true}\r\n    case GET_PURCHASE_REQUEST:\r\n      return {...state, isLoading: false}\r\n    case SET_PURCHASE_MESSAGE:\r\n      return {...state, purchaseMessage: action.payload}\r\n    case CLEAR_PURCHASE_MESSAGE:\r\n      return {...state, purchaseMessage: ''}\r\n    default:\r\n      return state\r\n  }\r\n}","import {combineReducers} from 'redux'\r\nimport {loginReducer} from './loginReducer'\r\nimport {serverCommunicationReducer} from './serverCommunicationReducer'\r\nimport {modalsReducer} from './modalsReducer'\r\nimport {booksReducer} from './booksReducer'\r\nimport {cartReducer} from './cartReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n  login: loginReducer,\r\n  serverCommunication: serverCommunicationReducer,\r\n  modals: modalsReducer,\r\n  books: booksReducer,\r\n  cart: cartReducer\r\n})","class ResponseDebugger {\r\n  getResponse = async (request, dispatch, func) => {\r\n    try {\r\n      return await request\r\n    } catch (e) {\r\n      dispatch(func())\r\n    }\r\n  }\r\n}\r\n\r\nexport default ResponseDebugger","import {axios} from 'utils'\r\nimport {showResponseErrorMessage, logout} from 'store'\r\nimport ResponseDebugger from './ResponseDebugger'\r\n\r\nclass RequestsSender extends ResponseDebugger {\r\n  constructor() {\r\n    super()\r\n\r\n    if (RequestsSender._instance) {\r\n      return RequestsSender._instance\r\n    }\r\n\r\n    RequestsSender._instance = this\r\n  }\r\n\r\n  login = async (userName, dispatch) => {\r\n    const formData = {\r\n      username: userName\r\n    }\r\n\r\n    return await this.getResponse(\r\n      axios.post('/signin', JSON.stringify(formData)),\r\n      dispatch,\r\n      showResponseErrorMessage\r\n    )\r\n  }\r\n\r\n  getAllBooks = async (dispatch) => {\r\n    return await this.getResponse(axios.get('/books'), dispatch, logout)\r\n  }\r\n\r\n  getCurrentBookInfo = async (bookId, dispatch) => {\r\n    return await this.getResponse(axios.get(`/books/${bookId}`), dispatch, logout)\r\n  }\r\n\r\n  purchase = async (booksList, dispatch) => {\r\n    const purchaseData = {\r\n      books: booksList\r\n    }\r\n\r\n    return await this.getResponse(axios.post('/purchase', JSON.stringify(purchaseData)), dispatch, logout)\r\n  }\r\n}\r\n\r\nexport default RequestsSender","import RequestSender from 'models/RequestsSender'\r\n\r\nexport const serverCommunicationMethods = new RequestSender()","import {serverCommunicationMethods} from 'serverCommunication'\r\nimport {clearCart} from 'store'\r\nimport {deleteCookie} from 'utils'\r\nimport {START_LOGIN, LOGIN, LOGOUT} from '../actionTypes'\r\n\r\nexport const startLogin = () => {\r\n  return {\r\n    type: START_LOGIN\r\n  }\r\n}\r\n\r\nexport const login = () => {\r\n  return {\r\n    type: LOGIN\r\n  }\r\n}\r\n\r\nexport const logout = () => {\r\n  deleteCookie('token')\r\n  localStorage.removeItem('activeUser')\r\n\r\n  return dispatch => {\r\n    dispatch(clearCart())\r\n    dispatch({type: LOGOUT})\r\n  }\r\n}\r\n\r\nexport const auth = (userName) => {\r\n  return async dispatch => {\r\n    dispatch(startLogin())\r\n    const response = await serverCommunicationMethods.login(userName, dispatch)\r\n    if (response && response.data.token) {\r\n      document.cookie = `token=${response.data.token}`\r\n\r\n      const userData = {\r\n        name: response.data.username,\r\n        avatar: response.data.avatar\r\n      }\r\n\r\n      localStorage.setItem('activeUser', JSON.stringify(userData))\r\n      dispatch(login())\r\n    }\r\n  }\r\n}","import {\r\n  SHOW_RESPONSE_ERROR_MESSAGE,\r\n  HIDE_RESPONSE_ERROR_MESSAGE\r\n} from '../actionTypes'\r\n\r\nexport const showResponseErrorMessage = () => {\r\n  return {\r\n    type: SHOW_RESPONSE_ERROR_MESSAGE\r\n  }\r\n}\r\n\r\nexport const hideResponseErrorMessage = () => {\r\n  return {\r\n    type: HIDE_RESPONSE_ERROR_MESSAGE\r\n  }\r\n}","import {\r\n  SHOW_CONFIRM_LOGOUT_MODAL,\r\n  HIDE_CONFIRM_LOGOUT_MODAL,\r\n  SHOW_CONFIRM_CLEAR_CART_MODAL,\r\n  HIDE_CONFIRM_CLEAR_CART_MODAL,\r\n  SHOW_ADDED_BOOK_TO_CART_MODAL,\r\n  HIDE_ADDED_BOOK_TO_CART_MODAL,\r\n  SHOW_PURCHASE_MODAL,\r\n  HIDE_PURCHASE_MODAL\r\n} from '../actionTypes'\r\n\r\nexport const showConfirmLogoutModal = () => {\r\n  return {\r\n    type: SHOW_CONFIRM_LOGOUT_MODAL\r\n  }\r\n}\r\n\r\nexport const hideConfirmLogoutModal = () => {\r\n  return {\r\n    type: HIDE_CONFIRM_LOGOUT_MODAL\r\n  }\r\n}\r\n\r\nexport const showConfirmClearCartModal = () => {\r\n  return {\r\n    type: SHOW_CONFIRM_CLEAR_CART_MODAL\r\n  }\r\n}\r\n\r\nexport const hideConfirmClearCartModal = () => {\r\n  return {\r\n    type: HIDE_CONFIRM_CLEAR_CART_MODAL\r\n  }\r\n}\r\n\r\nexport const showAddedToCartBookModal = () => {\r\n  return {\r\n    type: SHOW_ADDED_BOOK_TO_CART_MODAL\r\n  }\r\n}\r\n\r\nexport const hideAddedToCartBookModal = () => {\r\n  return {\r\n    type: HIDE_ADDED_BOOK_TO_CART_MODAL\r\n  }\r\n}\r\n\r\nexport const showPurchaseModal = () => {\r\n  return {\r\n    type: SHOW_PURCHASE_MODAL\r\n  }\r\n}\r\n\r\nexport const hidePurchaseModal = () => {\r\n  return {\r\n    type: HIDE_PURCHASE_MODAL\r\n  }\r\n}","import {serverCommunicationMethods} from 'serverCommunication'\r\nimport {\r\n  START_LOADING,\r\n  SET_ALL_BOOKS,\r\n  STOP_LOADING,\r\n  SET_CURRENT_BOOK_INFO\r\n} from '../actionTypes'\r\n\r\nexport const startLoading = () => {\r\n  return {\r\n    type: START_LOADING\r\n  }\r\n}\r\n\r\nexport const setAllBooks = (books) => {\r\n  return {\r\n    type: SET_ALL_BOOKS,\r\n    payload: books\r\n  }\r\n}\r\n\r\nexport const stopLoading = () => {\r\n  return {\r\n    type: STOP_LOADING\r\n  }\r\n}\r\n\r\nexport const setCurrentBookInfo = (bookInfo) => {\r\n  return {\r\n    type: SET_CURRENT_BOOK_INFO,\r\n    payload: bookInfo\r\n  }\r\n}\r\n\r\nexport const getAllBooks = () => {\r\n  return async dispatch => {\r\n    const response = await serverCommunicationMethods.getAllBooks(dispatch)\r\n    if (response && response.data) {\r\n      dispatch(setAllBooks(response.data))\r\n    }\r\n  }\r\n}\r\n\r\nexport const getCurrentBookInfo = (bookId) => {\r\n  return async dispatch => {\r\n    dispatch(startLoading())\r\n    const response = await serverCommunicationMethods\r\n      .getCurrentBookInfo(bookId, dispatch)\r\n\r\n    if (response && response.data) {\r\n      dispatch(setCurrentBookInfo(response.data))\r\n      dispatch(stopLoading())\r\n    }\r\n  }\r\n}","import {serverCommunicationMethods} from 'serverCommunication'\r\nimport {showPurchaseModal} from 'store'\r\nimport {getCartValue} from 'utils'\r\nimport {\r\n  ADD_NEW_BOOK_TO_CART,\r\n  REMOVE_BOOK_FROM_CART,\r\n  EDIT_BOOKS_COUNT,\r\n  CLEAR_CART,\r\n  SEND_PURCHASE_REQUEST,\r\n  GET_PURCHASE_REQUEST,\r\n  SET_PURCHASE_MESSAGE,\r\n  CLEAR_PURCHASE_MESSAGE\r\n} from '../actionTypes'\r\n\r\nconst cart = getCartValue()\r\n\r\nconst actionCreator = (books, action) => {\r\n  const changedCart = {\r\n    addedBooks: books.addedBooks,\r\n    totalPrice: books.totalPrice,\r\n    totalCount: books.totalCount\r\n  }\r\n\r\n  localStorage.setItem('addedToCartBooks', JSON.stringify(changedCart))\r\n\r\n  return {\r\n    type: action,\r\n    payload: {\r\n      addedBooks: books.addedBooks,\r\n      totalPrice: books.totalPrice,\r\n      totalCount: books.totalCount\r\n    }\r\n  }\r\n}\r\n\r\nexport const addNewBookToCart = (book, addedCount, currentBookTotalPrice) => {\r\n  const newBooks = cart.addBookToCart(book, addedCount, currentBookTotalPrice)\r\n\r\n  return dispatch => {\r\n    dispatch(actionCreator(newBooks, ADD_NEW_BOOK_TO_CART))\r\n  }\r\n}\r\n\r\nexport const editBooksCount = (bookId, action) => {\r\n  const editedBooks = cart.editCountOfOneBookDuplicates(bookId, action)\r\n\r\n  return dispatch => {\r\n    dispatch(actionCreator(editedBooks, EDIT_BOOKS_COUNT))\r\n  }\r\n}\r\n\r\nexport const deleteBookFromCart = (bookId) => {\r\n  const booksListWithoutDeletedBook = cart.removeBookFromCart(bookId)\r\n\r\n  return dispatch => {\r\n    dispatch(actionCreator(booksListWithoutDeletedBook, REMOVE_BOOK_FROM_CART))\r\n  }\r\n}\r\n\r\nexport const clearCart = () => {\r\n  const emptyCart = cart.clearCart()\r\n\r\n  return dispatch => {\r\n    dispatch(actionCreator(emptyCart, CLEAR_CART))\r\n  }\r\n}\r\n\r\nexport const sendPurchaseRequest = () => {\r\n  return {\r\n    type: SEND_PURCHASE_REQUEST\r\n  }\r\n}\r\n\r\nexport const getPurchaseRequest = () => {\r\n  return {\r\n    type: GET_PURCHASE_REQUEST\r\n  }\r\n}\r\n\r\nexport const setPurchaseMessage = (message) => {\r\n  return {\r\n    type: SET_PURCHASE_MESSAGE,\r\n    payload: message\r\n  }\r\n}\r\n\r\nexport const clearPurchaseMessage = () => {\r\n  return {\r\n    type: CLEAR_PURCHASE_MESSAGE\r\n  }\r\n}\r\n\r\nexport const purchase = (books) => {\r\n  return async dispatch => {\r\n    dispatch(sendPurchaseRequest())\r\n    const response = await serverCommunicationMethods.purchase(books, dispatch)\r\n    dispatch(setPurchaseMessage(response.data.message))\r\n    dispatch(getPurchaseRequest())\r\n    dispatch(showPurchaseModal())\r\n  }\r\n}","export const colors = {\r\n  global: '#009898',\r\n  white: '#ffffff',\r\n  black: '#464646',\r\n  section: '#cccccc',\r\n  red: '#ff0000',\r\n  errorMessageBack: '#ffe2d9',\r\n  purple: '#be1036',\r\n  cardBack: '#4B0082'\r\n}","export default __webpack_public_path__ + \"static/media/error-icon.9b3ca0a0.svg\";","export default __webpack_public_path__ + \"static/media/hide-error-message.385c64ed.svg\";","export default __webpack_public_path__ + \"static/media/logoutIcon.975da757.svg\";","export default __webpack_public_path__ + \"static/media/cartIcon.6165a8fa.svg\";","export default __webpack_public_path__ + \"static/media/searchIcon.180f4a6d.svg\";","export default __webpack_public_path__ + \"static/media/angleDownIcon.20f1f5d3.svg\";","export default __webpack_public_path__ + \"static/media/bookIcon.1ed0472e.svg\";","export default __webpack_public_path__ + \"static/media/plusIcon.241dfa5b.svg\";","export default __webpack_public_path__ + \"static/media/minusIcon.7d86b950.svg\";","export default __webpack_public_path__ + \"static/media/trash.57b10621.svg\";","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const ErrorMessageWrapper = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 40px;\r\n  background: ${colors.errorMessageBack};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 5%;\r\n  z-index: 9999;\r\n  transform: ${({show}) => show ? 'translateY(0)' : 'translateY(-100%)'};\r\n  transition: transform .5s;\r\n`\r\n\r\nexport const MessageWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\n\r\nexport const ErrorIcon = styled.img`\r\n  width: 15px;\r\n  height: 15px;\r\n`\r\n\r\nexport const Message = styled.p`\r\n  font-size: 14px;\r\n  color: ${colors.red};\r\n  margin-left: 10px;\r\n`\r\n\r\nexport const HideMessageButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  width: 15px;\r\n  height: 15px;\r\n  margin-left: 10px;\r\n`\r\n\r\nexport const HideMessageIcon = styled.img`\r\n  width: 15px;\r\n  height: 15px;\r\n  cursor: pointer;\r\n`","import ErrorBoundary from './ErrorBoundary'\r\n\r\nexport default ErrorBoundary","import React, {useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {errorIcon, hideErrorMessage} from 'assets'\r\nimport {hideResponseErrorMessage} from 'store'\r\n\r\nimport {\r\n  ErrorIcon,\r\n  ErrorMessageWrapper,\r\n  HideMessageButton,\r\n  HideMessageIcon,\r\n  Message,\r\n  MessageWrapper\r\n} from './style'\r\n\r\nconst ErrorBoundary = (Component) => {\r\n  return () => {\r\n    const dispatch = useDispatch()\r\n    const {isResponseErrorMessageVisible} = useSelector(({serverCommunication}) => {\r\n      return serverCommunication\r\n    })\r\n\r\n    useEffect(() => {\r\n      let closeMessageTimeOut\r\n      if (isResponseErrorMessageVisible) {\r\n        closeMessageTimeOut = setTimeout(() => {\r\n          dispatch(hideResponseErrorMessage())\r\n        }, 10000)\r\n      }\r\n\r\n      return () => {\r\n        if (isResponseErrorMessageVisible) {\r\n          clearTimeout(closeMessageTimeOut)\r\n        }\r\n      }\r\n    }, [isResponseErrorMessageVisible])\r\n\r\n    return (\r\n      <>\r\n        <Component />\r\n        <ErrorMessageWrapper show={isResponseErrorMessageVisible}>\r\n          <MessageWrapper>\r\n            <ErrorIcon src={errorIcon} />\r\n            <Message>\r\n              Ooooops. Something went wrong. Try again a little bit later.\r\n            </Message>\r\n          </MessageWrapper>\r\n          <HideMessageButton onClick={() => dispatch(hideResponseErrorMessage())}>\r\n            <HideMessageIcon src={hideErrorMessage} />\r\n          </HideMessageButton>\r\n        </ErrorMessageWrapper>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const InputWrapper = styled.div`\r\n  position: relative;\r\n`\r\n\r\nexport const Label = styled.label`\r\n  display: block;\r\n  font-size: 15px;\r\n  margin: 0 0 10px 5px;\r\n  \r\n  ${p => p.fieldType === 'login' ? `\r\n    color: ${!p.isValid && p.isTouched ? colors.red : colors.global};\r\n  ` : p.fieldType === 'search' ? `\r\n    color: ${colors.black};\r\n    font-weight: 600;\r\n  ` : ''};\r\n`\r\n\r\nexport const Field = styled.input`\r\n  width: 100%;\r\n  font-size: 14px;\r\n  border-radius: 10px;\r\n  box-sizing: border-box;\r\n  \r\n  &::placeholder {\r\n    color: ${colors.black};\r\n  }\r\n\r\n  ${p => p.fieldType === 'login' ? `\r\n    border: 2px solid ${!p.isValid && p.isTouched ? colors.red : colors.global};\r\n    padding: 10px 15px;\r\n  ` : p.fieldType === 'search' ? `\r\n    border: 2px solid ${colors.black};\r\n    padding: 10px 15px 10px 35px;\r\n  ` : ''};\r\n`\r\n\r\nexport const ErrorMessage = styled.p`\r\n  font-size: 12px;  \r\n  color: ${colors.red};\r\n  margin: 5px 5px 0 0;\r\n  text-align: right;\r\n  opacity: ${p => !p.isValid && p.isTouched ? 1 : 0};\r\n`\r\n\r\nexport const SearchIcon = styled.img`\r\n  display: ${({fieldType}) => fieldType === 'search' ? 'block' : 'none'};\r\n  width: 17px;\r\n  height: 17px;\r\n  position: absolute;\r\n  top: 58%;\r\n  left: 15px;\r\n`","import Input from './Input'\r\n\r\nexport default Input","import React from 'react'\r\nimport {searchIcon} from 'assets'\r\n\r\nimport {InputWrapper, Label, Field, ErrorMessage, SearchIcon} from './style'\r\n\r\nconst Input = (props) => (\r\n  <InputWrapper>\r\n    <Label\r\n      fieldType={props.fieldType}\r\n      isValid={props.isValid}\r\n      isTouched={props.isTouched}>\r\n      {props.label}\r\n    </Label>\r\n    <Field\r\n      type={props.type}\r\n      fieldType={props.fieldType}\r\n      value={props.value}\r\n      isValid={props.isValid}\r\n      isTouched={props.isTouched}\r\n      placeholder={props.placeholder}\r\n      onChange={props.onChange}\r\n      onBlur={props.onBlur} />\r\n    <SearchIcon\r\n      src={searchIcon}\r\n      fieldType={props.fieldType} />\r\n    <ErrorMessage\r\n      isValid={props.isValid}\r\n      isTouched={props.isTouched}>\r\n      {props.errorMessage}\r\n    </ErrorMessage>\r\n  </InputWrapper>\r\n)\r\n\r\nexport default Input","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const ButtonElem = styled.button`\r\n  text-transform: uppercase;\r\n  padding: 10px 15px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: none;\r\n  color: ${colors.white};\r\n  font-size: 16px;\r\n  border-radius: 10px;\r\n  background: ${colors.global};\r\n  cursor: pointer;\r\n  \r\n  ${p => p.btnType === 'purple' && `background: ${colors.purple}`};\r\n  \r\n  @media screen and (max-width: 384px) {\r\n    font-size: 14px;\r\n  }\r\n`","import Button from './Button'\r\n\r\nexport default Button","import React from 'react'\r\n\r\nimport {ButtonElem} from './style'\r\n\r\nconst Button = (props) => (\r\n  <ButtonElem btnType={props.btnType} onClick={props.onClick}>\r\n    {props.children}\r\n  </ButtonElem>\r\n)\r\n\r\nexport default Button","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const ModalWrapper = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, .6);\r\n  display: ${({show}) => show ? 'block' : 'none'};\r\n  z-index: 9999;\r\n`\r\n\r\nexport const ModalContentWrapper = styled.div`\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 20px;\r\n  background: ${colors.section};\r\n  border-radius: 10px;\r\n  width: 80%;\r\n  max-width: 350px;\r\n  max-height: 80vh;\r\n  overflow: auto;\r\n`","import Modal from './Modal'\r\n\r\nexport default Modal","import React from 'react'\r\n\r\nimport {ModalContentWrapper, ModalWrapper} from './style'\r\n\r\nconst Modal = ({children, show}) => (\r\n  <ModalWrapper show={show}>\r\n    <ModalContentWrapper>\r\n      {children}\r\n    </ModalContentWrapper>\r\n  </ModalWrapper>\r\n)\r\n\r\nexport default Modal","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const Label = styled.label`\r\n  display: block;\r\n  font-size: 15px;\r\n  margin: 0 0 10px 5px;\r\n  color: ${colors.black};\r\n  font-weight: 600;\r\n`\r\n\r\nexport const SelectElem = styled.select`\r\n  width: 100%;\r\n  padding: 10px 15px;\r\n  border: 2px solid ${colors.black};\r\n  font-size: 14px;\r\n  border-radius: 10px;\r\n  box-sizing: border-box;\r\n  background: ${colors.white};\r\n`\r\n\r\nexport const Option = styled.option``","import Select from './Select'\r\n\r\nexport default Select","import React, {Children} from 'react'\r\n\r\nimport {Label, SelectElem, Option} from './style'\r\n\r\nconst Select = (props) => (\r\n  <>\r\n    <Label>{props.label}</Label>\r\n    <SelectElem\r\n      value={props.value}\r\n      onChange={props.onChange}>\r\n      {Children.toArray(props.optionsArr.map(option => <Option>{option}</Option>))}\r\n    </SelectElem>\r\n  </>\r\n)\r\n\r\nexport default Select","import styled from 'styled-components'\r\n\r\nexport const LoaderWrapper = styled.div`\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`","import Loader from './Loader'\r\n\r\nexport default Loader","import React from 'react'\r\nimport {Ellipsis} from 'react-awesome-spinners'\r\nimport {LoaderWrapper} from './style'\r\n\r\nconst Loader = () => (\r\n  <LoaderWrapper>\r\n    <Ellipsis color=\"#fff\" />\r\n  </LoaderWrapper>\r\n)\r\n\r\nexport default Loader","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const LoginPageWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n`\r\n\r\nexport const LoginBlockWrapper = styled.div`\r\n  width: 90%;\r\n  max-width: 450px;\r\n  background: ${colors.section};\r\n  padding: 20px;\r\n  border-radius: 15px;\r\n  box-sizing: border-box;\r\n`\r\n\r\nexport const Title = styled.h2`\r\n  font-size: 30px;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n\r\n  @media screen and (max-width: 468px) {\r\n    font-size: 24px;\r\n  }\r\n\r\n  @media screen and (max-width: 384px) {\r\n    font-size: 20px;\r\n  }\r\n\r\n  @media screen and (max-width: 327px) {\r\n    font-size: 19px;\r\n  }\r\n`\r\n\r\nexport const Form = styled.form``\r\n\r\nexport const SubmitButtonWrapper = styled.div`\r\n  margin-top: 20px;\r\n`","import LoginPage from './LoginPage'\r\n\r\nexport default LoginPage","import React, {useState} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Ellipsis} from 'react-awesome-spinners'\r\nimport {ErrorBoundary} from 'hoc'\r\nimport {Button, Input} from 'components/UI'\r\nimport {checkValidity} from 'utils'\r\nimport {auth} from 'store'\r\nimport {getUserNameErrorMessage} from './getUserNameErrorMessage'\r\n\r\nimport {\r\n  Form,\r\n  LoginBlockWrapper,\r\n  LoginPageWrapper,\r\n  SubmitButtonWrapper,\r\n  Title\r\n} from './style'\r\n\r\nconst LoginPage = () => {\r\n  const dispatch = useDispatch()\r\n  const {isLoading} = useSelector(({login}) => login)\r\n\r\n  const [nameControl, setNameControl] = useState({\r\n    value: '',\r\n    isValid: false,\r\n    isTouched: false,\r\n    errorMessage: 'Enter the field',\r\n    rules: {\r\n      required: true,\r\n      minLength: 4,\r\n      maxLength: 16\r\n    }\r\n  })\r\n\r\n  const getValidUserName = (event, isBlurHandler) => {\r\n    const control = {...nameControl}\r\n\r\n    control.value = event.target.value\r\n    control.isValid = checkValidity(control.value, control.rules)\r\n    control.errorMessage = getUserNameErrorMessage(control.value)\r\n\r\n    if (isBlurHandler) {\r\n      control.isTouched = true\r\n    }\r\n\r\n    setNameControl(control)\r\n  }\r\n\r\n  const changeHandler = (event) => {\r\n    getValidUserName(event)\r\n  }\r\n\r\n  const blurHandler = (event) => {\r\n    getValidUserName(event, true)\r\n  }\r\n\r\n  const submitHandler = (event) => {\r\n    event.preventDefault()\r\n    const control = {...nameControl}\r\n    control.isTouched = true\r\n\r\n    if (control.isValid) {\r\n      dispatch(auth(control.value))\r\n    }\r\n\r\n    setNameControl(control)\r\n  }\r\n\r\n  return (\r\n    <LoginPageWrapper>\r\n      {!isLoading ? (\r\n        <LoginBlockWrapper>\r\n          <Title>Welcome to JS Band Store</Title>\r\n          <Form>\r\n            <Input\r\n              type=\"text\"\r\n              fieldType=\"login\"\r\n              label=\"Name\"\r\n              placeholder=\"John Adams\"\r\n              value={nameControl.value}\r\n              isValid={nameControl.isValid}\r\n              isTouched={nameControl.isTouched}\r\n              errorMessage={nameControl.errorMessage}\r\n              onChange={changeHandler}\r\n              onBlur={blurHandler} />\r\n            <SubmitButtonWrapper>\r\n              <Button onClick={submitHandler}>Log in</Button>\r\n            </SubmitButtonWrapper>\r\n          </Form>\r\n        </LoginBlockWrapper>\r\n      ) : <Ellipsis color=\"#fff\" />}\r\n    </LoginPageWrapper>\r\n  )\r\n}\r\n\r\nexport default ErrorBoundary(LoginPage)","export const getUserNameErrorMessage = (value) => {\r\n  let errorMessage\r\n\r\n  if (value.length > 0 && value.length <= 4 || value.length > 16) {\r\n    errorMessage = 'Username is not valid'\r\n  } else if (value.length === 0) {\r\n    errorMessage = 'Enter the field'\r\n  } else {\r\n    errorMessage = 'No error'\r\n  }\r\n\r\n  return errorMessage\r\n}","export const checkValidity = (value, rules) => {\r\n  let isValid = true\r\n\r\n  if (rules.required) {\r\n    isValid = value.trim() !== '' && isValid\r\n  }\r\n\r\n  if (rules.minLength) {\r\n    isValid = value.trim().length >= rules.minLength && isValid\r\n  }\r\n\r\n  if (rules.maxLength) {\r\n    isValid = value.trim().length <= rules.maxLength && isValid\r\n  }\r\n\r\n  return isValid\r\n}","import styled from 'styled-components'\r\n\r\nexport const Message = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n`\r\n\r\nexport const ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  width: 47%;  \r\n`","import ConfirmLogoutModal from './ConfirmLogoutModal'\r\n\r\nexport default ConfirmLogoutModal","import React from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport {Modal, Button} from 'components/UI'\r\nimport {hideConfirmLogoutModal, logout, hideResponseErrorMessage} from 'store'\r\n\r\nimport {Message, ButtonsWrapper, ButtonWrapper} from './style'\r\n\r\nconst ConfirmLogoutModal = () => {\r\n  const dispatch = useDispatch()\r\n  const {isConfirmLogoutModalVisible} = useSelector(({modals}) => modals)\r\n\r\n  const logoutHandler = () => {\r\n    dispatch(logout())\r\n    dispatch(hideResponseErrorMessage())\r\n    dispatch(hideConfirmLogoutModal())\r\n  }\r\n\r\n  return (\r\n    <Modal show={isConfirmLogoutModalVisible}>\r\n      <Message>Do you really want to logout?</Message>\r\n      <ButtonsWrapper>\r\n        <ButtonWrapper onClick={() => dispatch(hideConfirmLogoutModal())}>\r\n          <Button>No</Button>\r\n        </ButtonWrapper>\r\n        <ButtonWrapper onClick={logoutHandler}>\r\n          <Button>Yes</Button>\r\n        </ButtonWrapper>\r\n      </ButtonsWrapper>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ConfirmLogoutModal","export const filterBooksByPrice = (value, books) => {\r\n  let filteredBooks = []\r\n\r\n  if (value === 'No filters') {\r\n    return books\r\n  } else if (value === '0 < price < 25') {\r\n    filteredBooks = []\r\n    books.filter(book => {\r\n      if (book.price > 0 && book.price <= 25) {\r\n        filteredBooks.push(book)\r\n      }\r\n    })\r\n  } else if (value === '25 < price < 50') {\r\n    filteredBooks = []\r\n    books.filter(book => {\r\n      if (book.price > 25 && book.price <= 50) {\r\n        filteredBooks.push(book)\r\n      }\r\n    })\r\n  } else if (value === 'price > 50') {\r\n    filteredBooks = []\r\n    books.filter(book => {\r\n      if (book.price > 50) {\r\n        filteredBooks.push(book)\r\n      }\r\n    })\r\n  }\r\n\r\n  return filteredBooks\r\n}","export const filterBooksByName = (value, books) => {\r\n  if (value.trim()) {\r\n    const filteredBooks = []\r\n\r\n    books.filter(book => {\r\n      if (book.title.toLowerCase().startsWith(value.toLowerCase().trim())) {\r\n        filteredBooks.push(book)\r\n      }\r\n    })\r\n\r\n    return filteredBooks\r\n  } else {\r\n    return books\r\n  }\r\n}","import styled from 'styled-components'\r\n\r\nexport const FiltersSectionWrapper = styled.div`\r\n  position: relative;\r\n`\r\n\r\nexport const OpenCloseFiltersWrapper = styled.div`\r\n  display: inline-flex;\r\n  margin-bottom: 15px;\r\n  cursor: pointer;  \r\n\r\n  @media screen and (min-width: 401px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const FiltersTitle = styled.h3`\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  margin-right: 10px;\r\n`\r\n\r\nexport const OpenCloseFiltersButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  height: 12px;\r\n  position: relative;\r\n  top: 3px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const OpenCloseFiltersIcon = styled.img`\r\n  width: 12px;\r\n  transform: ${p => p.areFiltersVisible ? 'rotate(0)' : 'rotate(-90deg)'};\r\n  transition: transform 1s;\r\n`\r\n\r\nexport const FiltersWrapper = styled.div`\r\n  display: flex;\r\n  overflow: hidden;\r\n  margin-bottom: 30px;\r\n  justify-content: space-between;\r\n\r\n  @media screen and (max-width: 400px) {\r\n    flex-direction: column;\r\n    align-items: center; \r\n    max-height: ${p => p.areFiltersVisible ? '500px' : 0};\r\n    transition: max-height 1s ease-in-out;\r\n  }\r\n`\r\n\r\nexport const FilterFieldWrapper = styled.div`\r\n  width: 47%;\r\n  max-width: 300px;\r\n  \r\n  &:first-of-type {\r\n    margin-right: 20px;\r\n  }\r\n\r\n  @media screen and (max-width: 710px) {\r\n    &:first-of-type {\r\n      margin-right: 0;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 400px) {\r\n    width: 100%;\r\n\r\n    &:first-of-type {\r\n      margin-bottom: 20px;\r\n    }\r\n  }\r\n`","import BooksCatalogFilters from './BooksCatalogFilters'\r\n\r\nexport default BooksCatalogFilters","import React, {useState} from 'react'\r\nimport {useSelector} from 'react-redux'\r\nimport {Input, Select} from 'components/UI'\r\nimport {angleDownIcon} from 'assets'\r\nimport {filterBooksByPrice} from './filterBooksByPrice'\r\nimport {filterBooksByName} from './filterBooksByName'\r\n\r\nimport {\r\n  FilterFieldWrapper,\r\n  FiltersSectionWrapper,\r\n  FiltersTitle,\r\n  FiltersWrapper,\r\n  OpenCloseFiltersButton,\r\n  OpenCloseFiltersIcon,\r\n  OpenCloseFiltersWrapper\r\n} from './style'\r\n\r\nconst BooksCatalogFilters = ({filterBooksFnc}) => {\r\n  const [areFiltersVisible, setAreFiltersVisible] = useState(() => {\r\n    return window.innerWidth > 400\r\n  })\r\n\r\n  const {allBooks} = useSelector(({books}) => books)\r\n\r\n  const [controls, setControls] = useState({\r\n    search: {\r\n      value: ''\r\n    },\r\n    priceSelect: {\r\n      value: 'No filters'\r\n    }\r\n  })\r\n\r\n  const priceFilterOptions = [\r\n    'No filters',\r\n    '0 < price < 25',\r\n    '25 < price < 50',\r\n    'price > 50'\r\n  ]\r\n\r\n  const showHideFiltersHandler = () => {\r\n    setAreFiltersVisible(prev => !prev)\r\n  }\r\n\r\n  const searchChangeHandler = async (event) => {\r\n    const fields = {...controls}\r\n    fields.search.value = event.target.value\r\n\r\n    const filteredBooksByPrice = filterBooksByPrice(\r\n      fields.priceSelect.value,\r\n      allBooks\r\n    )\r\n\r\n    const filterBooksByNameArr = filterBooksByName(\r\n      fields.search.value,\r\n      filteredBooksByPrice\r\n    )\r\n    filterBooksFnc(filterBooksByNameArr)\r\n\r\n    setControls(fields)\r\n  }\r\n\r\n  const priceSelectChangeHandler = (event) => {\r\n    const fields = {...controls}\r\n    fields.priceSelect.value = event.target.value\r\n\r\n    const filteredBooksByName = filterBooksByName(\r\n      fields.search.value,\r\n      allBooks\r\n    )\r\n\r\n    const filterBooksByPriceArr = filterBooksByPrice(\r\n      fields.priceSelect.value,\r\n      filteredBooksByName\r\n    )\r\n    filterBooksFnc(filterBooksByPriceArr)\r\n\r\n    setControls(fields)\r\n  }\r\n\r\n  return (\r\n    <FiltersSectionWrapper>\r\n      <OpenCloseFiltersWrapper\r\n        areFiltersVisible={areFiltersVisible}\r\n        onClick={showHideFiltersHandler}>\r\n        <FiltersTitle>Filters</FiltersTitle>\r\n        <OpenCloseFiltersButton>\r\n          <OpenCloseFiltersIcon\r\n            src={angleDownIcon}\r\n            areFiltersVisible={areFiltersVisible} />\r\n        </OpenCloseFiltersButton>\r\n      </OpenCloseFiltersWrapper>\r\n      <FiltersWrapper areFiltersVisible={areFiltersVisible}>\r\n        <FilterFieldWrapper>\r\n          <Input\r\n            type=\"text\"\r\n            fieldType=\"search\"\r\n            label=\"Search by name\"\r\n            placeholder=\"book name\"\r\n            value={controls.search.value}\r\n            onChange={searchChangeHandler} />\r\n        </FilterFieldWrapper>\r\n        <FilterFieldWrapper>\r\n          <Select\r\n            value={controls.priceSelect.value}\r\n            label=\"Filter by price\"\r\n            optionsArr={priceFilterOptions}\r\n            onChange={priceSelectChangeHandler} />\r\n        </FilterFieldWrapper>\r\n      </FiltersWrapper>\r\n    </FiltersSectionWrapper>\r\n  )\r\n}\r\n\r\nexport default BooksCatalogFilters","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const CardWrapper = styled.div`\r\n  width: 33.33%;\r\n  padding: 0 10px;\r\n  box-sizing: border-box;\r\n  \r\n  @media screen and (max-width: 730px) {\r\n    width: 50%;\r\n  }\r\n\r\n  @media screen and (max-width: 400px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nexport const CardContentWrapper = styled.div`\r\n  padding: 15px;\r\n  background: ${colors.cardBack};\r\n  border-radius: 5px;\r\n  box-sizing: border-box;\r\n  color: ${colors.white};\r\n  margin-bottom: 20px;\r\n`\r\n\r\nexport const BookCover = styled.div`\r\n  height: 240px;\r\n  overflow: hidden;\r\n  border-radius: 5px;\r\n  box-shadow: 3px 13px 12px -8px rgba(34, 60, 80, .5);\r\n  margin-bottom: 15px;\r\n  background: ${p => `url(\"${p.bookCover}\") no-repeat 50% 50%/cover`};\r\n  \r\n  @media screen and (max-width: 730px) {\r\n    height: calc(50vw - 90px);\r\n  }\r\n\r\n  @media screen and (max-width: 400px) {\r\n    height: 240px;\r\n  }\r\n`\r\n\r\nexport const BookName = styled.h3`\r\n  font-size: 16px;\r\n  white-space: nowrap; \r\n  overflow: hidden; \r\n  text-overflow: ellipsis;\r\n  margin-bottom: 15px;\r\n`\r\n\r\nexport const BookAuthor = styled.h4`\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nexport const PriceViewWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`\r\n\r\nexport const Price = styled.span`\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n`\r\n\r\nexport const ViewButtonWrapper = styled.div``","import BookCard from './BookCard'\r\n\r\nexport default BookCard","import React from 'react'\r\nimport {useHistory} from 'react-router-dom'\r\nimport {Button} from 'components/UI'\r\n\r\nimport {\r\n  BookAuthor,\r\n  BookCover,\r\n  BookName,\r\n  CardContentWrapper,\r\n  CardWrapper,\r\n  Price,\r\n  PriceViewWrapper,\r\n  ViewButtonWrapper\r\n} from './style'\r\n\r\nconst BookCard = ({book}) => {\r\n  const history = useHistory()\r\n\r\n  return (\r\n    <CardWrapper>\r\n      <CardContentWrapper>\r\n        <BookCover bookCover={book.cover} />\r\n        <BookName>{book.title}</BookName>\r\n        <BookAuthor>{book.author}</BookAuthor>\r\n        <PriceViewWrapper>\r\n          <Price>{book.price}$</Price>\r\n          <ViewButtonWrapper>\r\n            <Button onClick={() => history.push(`/catalog/${book.id}`)}>\r\n              View\r\n            </Button>\r\n          </ViewButtonWrapper>\r\n        </PriceViewWrapper>\r\n      </CardContentWrapper>\r\n    </CardWrapper>\r\n  )\r\n}\r\n\r\nexport default BookCard","export const disableAddingNewBooksIfThereISNoCurrentBooks = (\r\n  addedToCartBooks,\r\n  currentBookInfo,\r\n  setBooksCount,\r\n  setCanIncreaseBooksCount,\r\n  setTotalPrice\r\n) => {\r\n  const currentBookInCart = Object.entries(addedToCartBooks).filter(book => {\r\n    if (book[0] === currentBookInfo.id) {\r\n      return book\r\n    }\r\n  })\r\n\r\n  if (currentBookInCart.length) {\r\n    const alreadyAddedCount = currentBookInCart[0][1].addedCount\r\n    if (currentBookInfo.count - alreadyAddedCount === 0) {\r\n      setBooksCount(0)\r\n      setCanIncreaseBooksCount(false)\r\n      setTotalPrice(0)\r\n    }\r\n\r\n    if (currentBookInfo.count - alreadyAddedCount >= 1) {\r\n      setTotalPrice(currentBookInfo.price)\r\n    }\r\n\r\n    if (currentBookInfo.count - alreadyAddedCount === 1) {\r\n      setCanIncreaseBooksCount(false)\r\n    }\r\n  } else {\r\n    setBooksCount(1)\r\n    setCanIncreaseBooksCount(true)\r\n    setTotalPrice(currentBookInfo.price)\r\n  }\r\n}","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const BookPriceCountInfoWrapper = styled.div`\r\n  width: 100%;\r\n  height: fit-content;\r\n  padding: 15px;\r\n  background: ${colors.section};\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  box-sizing: border-box;\r\n`\r\n\r\nexport const InfoPartWrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-bottom: 15px;\r\n`\r\n\r\nexport const InfoLabel = styled.p`\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n`\r\n\r\nexport const InfoValue = styled.p`\r\n  font-size: 16px;\r\n`\r\n\r\nexport const AddToCartButtonWrapper = styled.div`\r\n  width: fit-content;\r\n  margin-top: 25px;\r\n`\r\n\r\nexport const CountValue = styled.div`\r\n  display: flex;\r\n  width: 100px;\r\n  justify-content: space-between;\r\n`\r\n\r\nexport const Count = styled.p`\r\n  font-size: 16px;\r\n  margin: 0 10px;\r\n`\r\n\r\nexport const IncreaseDecreaseButton = styled.button`\r\n  background: ${p => !p.canIncreaseBooksAmount && !p.canDecreaseBooksAmount ? colors.black : colors.global};\r\n  border: none;\r\n  cursor: ${p => !p.canIncreaseBooksAmount && !p.canDecreaseBooksAmount ? 'not-allowed' : 'pointer'};\r\n  height: 22px;\r\n  width: 22px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nexport const IncreaseDecreaseIcon = styled.img`\r\n  width: 12px;\r\n`","import BookPriceCountInfo from './BookPriceCountInfo'\r\n\r\nexport default BookPriceCountInfo","import React, {useEffect, useState} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {addNewBookToCart, showAddedToCartBookModal} from 'store'\r\nimport {Button} from 'components/UI'\r\nimport {minusIcon, plusIcon} from 'assets'\r\nimport {countTotalPriceOfSameBooks} from 'utils'\r\nimport {getChangedBooksCount} from './getChangedBooksCount'\r\nimport {disableAddingNewBooksIfThereISNoCurrentBooks} from './disableAddingNewBooks'\r\n\r\nimport {\r\n  AddToCartButtonWrapper,\r\n  BookPriceCountInfoWrapper,\r\n  Count,\r\n  CountValue,\r\n  IncreaseDecreaseButton,\r\n  IncreaseDecreaseIcon,\r\n  InfoLabel,\r\n  InfoPartWrapper,\r\n  InfoValue\r\n} from './style'\r\n\r\nconst BookPriceCountInfo = () => {\r\n  const dispatch = useDispatch()\r\n  const {currentBookInfo} = useSelector(({books}) => books)\r\n  const addedToCartBooks = useSelector(({cart}) => cart.addedBooks)\r\n  const [totalPrice, setTotalPrice] = useState(0)\r\n  const [booksCount, setBooksCount] = useState(1)\r\n  const [canIncreaseBooksCount, setCanIncreaseBooksCount] = useState(true)\r\n  const [canDecreaseBooksCount, setCanDecreaseBooksCount] = useState(false)\r\n\r\n  useEffect(() => {\r\n    disableAddingNewBooksIfThereISNoCurrentBooks(\r\n      addedToCartBooks,\r\n      currentBookInfo,\r\n      setBooksCount,\r\n      setCanIncreaseBooksCount,\r\n      setTotalPrice\r\n    )\r\n  }, [currentBookInfo])\r\n\r\n  const changeBooksAmountHandler = (action) => {\r\n    const currentBookInCart = Object.entries(addedToCartBooks).filter(book => {\r\n      if (book[0] === currentBookInfo.id) {\r\n        return book\r\n      }\r\n    })\r\n\r\n    const changedBooksCount = getChangedBooksCount(\r\n      currentBookInCart,\r\n      booksCount,\r\n      currentBookInfo,\r\n      setCanIncreaseBooksCount,\r\n      action\r\n    )\r\n\r\n    if (changedBooksCount) {\r\n      const changedTotalPrice = countTotalPriceOfSameBooks(\r\n        currentBookInfo.price,\r\n        changedBooksCount\r\n      )\r\n\r\n      setTotalPrice(changedTotalPrice)\r\n    }\r\n\r\n    if (changedBooksCount > 1) {\r\n      setCanDecreaseBooksCount(true)\r\n    } else if (changedBooksCount === 1) {\r\n      setCanDecreaseBooksCount(false)\r\n    }\r\n\r\n    setBooksCount(changedBooksCount)\r\n  }\r\n\r\n  const addNewBookToCartHandler = () => {\r\n    if (booksCount) {\r\n      dispatch(showAddedToCartBookModal())\r\n      dispatch(addNewBookToCart(currentBookInfo, booksCount, totalPrice))\r\n      setBooksCount(1)\r\n      setCanDecreaseBooksCount(false)\r\n\r\n      disableAddingNewBooksIfThereISNoCurrentBooks(\r\n        addedToCartBooks,\r\n        currentBookInfo,\r\n        setBooksCount,\r\n        setCanIncreaseBooksCount,\r\n        setTotalPrice\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <BookPriceCountInfoWrapper>\r\n      <InfoPartWrapper>\r\n        <InfoLabel>Price, $ </InfoLabel>\r\n        <InfoValue>{currentBookInfo.price}</InfoValue>\r\n      </InfoPartWrapper>\r\n      <InfoPartWrapper>\r\n        <InfoLabel>Count</InfoLabel>\r\n        <CountValue>\r\n          <IncreaseDecreaseButton\r\n            canIncreaseBooksAmount={canIncreaseBooksCount}\r\n            onClick={() => changeBooksAmountHandler('add')}>\r\n            <IncreaseDecreaseIcon src={plusIcon} />\r\n          </IncreaseDecreaseButton>\r\n          <Count>{booksCount}</Count>\r\n          <IncreaseDecreaseButton\r\n            canDecreaseBooksAmount={canDecreaseBooksCount}\r\n            onClick={() => changeBooksAmountHandler('remove')}>\r\n            <IncreaseDecreaseIcon src={minusIcon} />\r\n          </IncreaseDecreaseButton>\r\n        </CountValue>\r\n      </InfoPartWrapper>\r\n      <InfoPartWrapper>\r\n        <InfoLabel>Total price, $</InfoLabel>\r\n        <InfoValue>{totalPrice}</InfoValue>\r\n      </InfoPartWrapper>\r\n      <AddToCartButtonWrapper>\r\n        <Button onClick={addNewBookToCartHandler}>Add to Cart</Button>\r\n      </AddToCartButtonWrapper>\r\n    </BookPriceCountInfoWrapper>\r\n  )\r\n}\r\n\r\nexport default BookPriceCountInfo","import {chooseBooksAmount} from 'utils'\r\n\r\nexport const getChangedBooksCount = (\r\n  currentBookInCart,\r\n  booksCount,\r\n  currentBookInfo,\r\n  setCanIncreaseBooksCount,\r\n  action\r\n) => {\r\n  let changedBooksCount\r\n\r\n  if (currentBookInCart.length) {\r\n    const alreadyAddedCount = currentBookInCart[0][1].addedCount\r\n\r\n    changedBooksCount = chooseBooksAmount(\r\n      booksCount,\r\n      currentBookInfo.count - alreadyAddedCount,\r\n      action,\r\n      alreadyAddedCount\r\n    )\r\n\r\n    if (changedBooksCount === currentBookInfo.count - alreadyAddedCount) {\r\n      setCanIncreaseBooksCount(false)\r\n    } else if (changedBooksCount < currentBookInfo.count - alreadyAddedCount) {\r\n      setCanIncreaseBooksCount(true)\r\n    }\r\n  } else {\r\n    changedBooksCount = chooseBooksAmount(\r\n      booksCount,\r\n      currentBookInfo.count,\r\n      action\r\n    )\r\n\r\n    if (changedBooksCount === currentBookInfo.count) {\r\n      setCanIncreaseBooksCount(false)\r\n    } else if (changedBooksCount < currentBookInfo.count) {\r\n      setCanIncreaseBooksCount(true)\r\n    }\r\n  }\r\n\r\n  return changedBooksCount\r\n}","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\nimport {Link} from 'react-router-dom'\r\n\r\nexport const CartItemWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${colors.black};\r\n  background: ${colors.section};\r\n  padding: 10px;\r\n  \r\n  ${p => p.allBooks.length > 1 ? `\r\n    &:first-of-type {\r\n      border-radius: 5px 5px 0 0;\r\n    }\r\n    \r\n    &:last-of-type {\r\n      border-radius: 0 0 5px 5px;\r\n    }\r\n  ` : 'border-radius: 5px'};\r\n\r\n  &:last-of-type {\r\n    border: none;\r\n  }\r\n`\r\n\r\nexport const CartItemTitle = styled(Link)`\r\n  max-width: 60%;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  font-size: 18px;\r\n  color: ${colors.black};\r\n  font-weight: 700;\r\n  text-decoration: none;\r\n  \r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n\r\n  @media screen and (max-width: 650px) {\r\n    max-width: 50%;\r\n  }\r\n\r\n  @media screen and (max-width: 649px) {\r\n    font-size: 14px;\r\n  }\r\n\r\n  @media screen and (max-width: 550px) {\r\n    width: 40%;\r\n  }\r\n`\r\n\r\nexport const CounterTotalPriceDeleteBookWrapper = styled.div`\r\n  width: 20%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  \r\n  @media screen and (max-width: 1150px) {\r\n    width: 25%;\r\n  }\r\n\r\n  @media screen and (max-width: 900px) {\r\n    width: 30%;\r\n  }\r\n\r\n  @media screen and (max-width: 750px) {\r\n    width: 35%;\r\n  }\r\n\r\n  @media screen and (max-width: 650px) {\r\n    width: 40%;\r\n  }\r\n\r\n  @media screen and (max-width: 550px) {\r\n    width: 50%;\r\n  }\r\n\r\n  @media screen and (max-width: 450px) {\r\n    width: 55%;\r\n  }\r\n`\r\n\r\nexport const BooksCounterWrapper = styled.div`\r\n  width: 100px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  @media screen and (max-width: 450px) {\r\n    width: 80px;\r\n  }\r\n\r\n  @media screen and (max-width: 350px) {\r\n    width: 65px;\r\n  }\r\n`\r\n\r\nexport const IncreaseDecreaseButton = styled.button`\r\n  background: ${p => !p.canIncreaseBooksCount && !p.canDecreaseBooksCount ? colors.black : colors.global};\r\n  border: none;\r\n  cursor: ${p => !p.canIncreaseBooksCount && !p.canDecreaseBooksCount ? 'not-allowed' : 'pointer'};\r\n  height: 22px;\r\n  width: 22px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  @media screen and (max-width: 350px) {\r\n    width: 18px;\r\n    height: 18px;\r\n  }\r\n`\r\n\r\nexport const IncreaseDecreaseIcon = styled.img`\r\n  width: 12px;\r\n`\r\n\r\nexport const BooksCount = styled.p`\r\n  font-size: 16px;\r\n  margin: 0 5px;\r\n  font-weight: 600;\r\n\r\n  @media screen and (max-width: 649px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nexport const TotalPrice = styled.p`\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n\r\n  @media screen and (max-width: 649px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nexport const TrashButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  height: 20px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const TrashIcon = styled.img`\r\n  width: 18px;\r\n\r\n  @media screen and (max-width: 350px) {\r\n    width: 15px;\r\n  }\r\n`","import CartItem from './CartItem'\r\n\r\nexport default CartItem","import React from 'react'\r\nimport {useDispatch} from 'react-redux'\r\nimport {plusIcon, minusIcon, trashIcon} from 'assets'\r\nimport {editBooksCount, deleteBookFromCart} from 'store'\r\n\r\nimport {\r\n  CartItemWrapper,\r\n  CartItemTitle,\r\n  CounterTotalPriceDeleteBookWrapper,\r\n  BooksCounterWrapper,\r\n  IncreaseDecreaseButton,\r\n  IncreaseDecreaseIcon,\r\n  BooksCount,\r\n  TotalPrice,\r\n  TrashButton,\r\n  TrashIcon\r\n} from './style'\r\n\r\nconst CartItem = ({book, allBooks}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  return (\r\n    <CartItemWrapper allBooks={allBooks}>\r\n      <CartItemTitle to={`catalog/${book.id}`}>{book.title}</CartItemTitle>\r\n      <CounterTotalPriceDeleteBookWrapper>\r\n        <BooksCounterWrapper>\r\n          <IncreaseDecreaseButton\r\n            canIncreaseBooksCount={book.canUserIncreaseBooksCount}\r\n            onClick={() => dispatch(editBooksCount(book.id, 'add'))}>\r\n            <IncreaseDecreaseIcon src={plusIcon} />\r\n          </IncreaseDecreaseButton>\r\n          <BooksCount>{book.addedCount}</BooksCount>\r\n          <IncreaseDecreaseButton\r\n            canDecreaseBooksCount={book.canUserDecreaseBooksCount}\r\n            onClick={() => dispatch(editBooksCount(book.id, 'remove'))}>\r\n            <IncreaseDecreaseIcon src={minusIcon} />\r\n          </IncreaseDecreaseButton>\r\n        </BooksCounterWrapper>\r\n        <TotalPrice>{book.currentBookTotalPrice}$</TotalPrice>\r\n        <TrashButton onClick={() => dispatch(deleteBookFromCart(book.id))}>\r\n          <TrashIcon src={trashIcon} />\r\n        </TrashButton>\r\n      </CounterTotalPriceDeleteBookWrapper>\r\n    </CartItemWrapper>\r\n  )\r\n}\r\n\r\nexport default CartItem","import styled from 'styled-components'\r\n\r\nexport const Message = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n`\r\n\r\nexport const ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  width: 47%;  \r\n`","import ConfirmClearCartModal from './ConfirmClearCartModal'\r\n\r\nexport default ConfirmClearCartModal","import React from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport {hideConfirmClearCartModal, clearCart} from 'store'\r\nimport {Button, Modal} from 'components/UI'\r\n\r\nimport {Message, ButtonsWrapper, ButtonWrapper} from './style'\r\n\r\nconst ConfirmClearCartModal = () => {\r\n  const dispatch = useDispatch()\r\n  const {isConfirmClearCartModalVisible} = useSelector(({modals}) => modals)\r\n\r\n  const clearCartHandler = () => {\r\n    dispatch(clearCart())\r\n    dispatch(hideConfirmClearCartModal())\r\n  }\r\n\r\n  return (\r\n    <Modal show={isConfirmClearCartModalVisible}>\r\n      <Message>Do you really want to clear the cart?</Message>\r\n      <ButtonsWrapper>\r\n        <ButtonWrapper>\r\n          <Button onClick={() => dispatch(hideConfirmClearCartModal())}>\r\n            No\r\n          </Button>\r\n        </ButtonWrapper>\r\n        <ButtonWrapper>\r\n          <Button onClick={clearCartHandler}>\r\n            Yes\r\n          </Button>\r\n        </ButtonWrapper>\r\n      </ButtonsWrapper>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ConfirmClearCartModal","import styled from 'styled-components'\r\n\r\nexport const Message = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n`","import AddedBookToCartModal from './AddedBookToCartModal'\r\n\r\nexport default AddedBookToCartModal","import React, {useEffect} from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport {hideAddedToCartBookModal} from 'store'\r\nimport {Modal, Button} from 'components/UI'\r\n\r\nimport {Message} from './style'\r\n\r\nconst AddedBookToCartModal = () => {\r\n  const dispatch = useDispatch()\r\n  const {isAddedBookToCartModalVisible} = useSelector(({modals}) => modals)\r\n\r\n  useEffect(() => {\r\n    if (isAddedBookToCartModalVisible) {\r\n      const hideModalTimeout = setTimeout(() => {\r\n        dispatch(hideAddedToCartBookModal())\r\n      }, 5000)\r\n\r\n      return () => clearTimeout(hideModalTimeout)\r\n    }\r\n  }, [isAddedBookToCartModalVisible])\r\n\r\n  return (\r\n    <Modal show={isAddedBookToCartModalVisible}>\r\n      <Message>Book was successfully added to cart</Message>\r\n      <Button onClick={() => dispatch(hideAddedToCartBookModal())}>\r\n        Close\r\n      </Button>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default AddedBookToCartModal","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const BoughtCartItemWrapper = styled.div`\r\n  display: flex;\r\n  box-sizing: border-box;\r\n`\r\n\r\nexport const BookTitle = styled.p`\r\n  width: 60%;\r\n  font-size: 13px;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  padding: 5px;\r\n  box-sizing: border-box;\r\n  border: 1px solid ${colors.black};\r\n  border-top: none;\r\n  \r\n  ${p => p.firstRow ? `\r\n    text-align: center;\r\n    background: ${colors.global};\r\n    color: ${colors.white};\r\n    border-top: 1px solid ${colors.black};\r\n  ` : ''};\r\n  \r\n  @media screen and (max-width: 490px) {\r\n    width: 50%;\r\n  }\r\n`\r\n\r\nexport const TotalCountPriceWrapper = styled.div`\r\n  width: 40%;\r\n  display: flex;\r\n\r\n  @media screen and (max-width: 490px) {\r\n    width: 50%;\r\n  }\r\n`\r\n\r\nexport const TotalCount = styled.p`\r\n  padding: 5px;\r\n  font-size: 13px;\r\n  width: 50%;\r\n  text-align: center;\r\n  border: 1px solid ${colors.black};\r\n  border-top: none;\r\n  border-left: none;\r\n\r\n  ${p => p.firstRow ? `\r\n    background: ${colors.global};\r\n    color: ${colors.white};\r\n    border-top: 1px solid ${colors.black};\r\n  ` : ''};\r\n`\r\n\r\nexport const TotalPrice = styled.p`\r\n  padding: 5px;\r\n  font-size: 13px;\r\n  width: 50%;\r\n  text-align: center;\r\n  border: 1px solid ${colors.black};\r\n  border-top: none;\r\n  border-left: none;\r\n\r\n  ${p => p.firstRow ? `\r\n    background: ${colors.global};\r\n    color: ${colors.white};\r\n    border-top: 1px solid ${colors.black};\r\n  ` : ''};\r\n`","import BoughtCartItem from './BoughtCartItem'\r\n\r\nexport default BoughtCartItem","import React from 'react'\r\n\r\nimport {\r\n  BookTitle,\r\n  BoughtCartItemWrapper,\r\n  TotalCount,\r\n  TotalCountPriceWrapper,\r\n  TotalPrice\r\n} from './style'\r\n\r\nconst BoughtCartItem = ({book, firstRow}) => (\r\n  <BoughtCartItemWrapper>\r\n    <BookTitle firstRow={firstRow}>\r\n      {firstRow ? 'Title' : book.title}\r\n    </BookTitle>\r\n    <TotalCountPriceWrapper>\r\n      <TotalCount firstRow={firstRow}>\r\n        {firstRow ? 'Count' : book.addedCount}\r\n      </TotalCount>\r\n      <TotalPrice firstRow={firstRow}>\r\n        {firstRow ? 'Total' : book.currentBookTotalPrice}\r\n      </TotalPrice>\r\n    </TotalCountPriceWrapper>\r\n  </BoughtCartItemWrapper>\r\n)\r\n\r\nexport default BoughtCartItem","import styled from 'styled-components'\r\n\r\nexport const Message = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n`\r\n\r\nexport const PurchaseList = styled.div`\r\n  margin-bottom: 10px;\r\n`\r\n\r\nexport const TotalPrice = styled.p`\r\n  font-size: 13px;\r\n  text-align: right;\r\n  margin-bottom: 25px;\r\n`","import PurchaseModal from './PurchaseModal'\r\n\r\nexport default PurchaseModal","import React from 'react'\r\nimport {useSelector, useDispatch} from 'react-redux'\r\nimport {useHistory} from 'react-router-dom'\r\nimport {hidePurchaseModal, clearCart, clearPurchaseMessage} from 'store'\r\nimport {BoughtCartItem} from 'components'\r\nimport {Modal, Button} from 'components/UI'\r\n\r\nimport {Message, PurchaseList, TotalPrice} from './style'\r\n\r\nconst PurchaseModal = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const {addedBooks, totalPrice, purchaseMessage} = useSelector(({cart}) => cart)\r\n  const {isPurchaseModalVisible} = useSelector(({modals}) => modals)\r\n\r\n  const addedBooksToCartArr = Object.entries(addedBooks).map(book => {\r\n    book[1].id = book[0]\r\n    return book[1]\r\n  })\r\n\r\n  const finishPurchaseHandler = () => {\r\n    dispatch(hidePurchaseModal())\r\n    history.push('/catalog')\r\n    dispatch(clearCart())\r\n    dispatch(clearPurchaseMessage())\r\n  }\r\n\r\n  if (purchaseMessage) {\r\n    return (\r\n      <Modal show={isPurchaseModalVisible}>\r\n        <Message>{purchaseMessage}</Message>\r\n        <PurchaseList>\r\n          <BoughtCartItem firstRow />\r\n          {addedBooksToCartArr.map(book => {\r\n            return (\r\n              <BoughtCartItem\r\n                key={book.id}\r\n                book={book}\r\n                allBooks={addedBooksToCartArr} />\r\n            )\r\n          })}\r\n        </PurchaseList>\r\n        <TotalPrice>Total price: {totalPrice}$</TotalPrice>\r\n        <Button onClick={finishPurchaseHandler}>\r\n          Close\r\n        </Button>\r\n      </Modal>\r\n    )\r\n  } else {\r\n    return <div />\r\n  }\r\n}\r\n\r\nexport default PurchaseModal","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\nimport {ReactComponent as CartIcon} from 'assets/images/cartIcon.svg'\r\n\r\nexport const HeaderWrapper = styled.div`\r\n  background: ${colors.purple};\r\n  position: fixed;  \r\n  top: 0; \r\n  left: 0;  \r\n  right: 0; \r\n  z-index: 999;\r\n`\r\n\r\nexport const Header = styled.div`\r\n  width: 90%;\r\n  max-width: 1250px;\r\n  margin: 15px auto;\r\n  display: flex;\r\n  justify-content: space-between; \r\n  align-items: center;\r\n`\r\n\r\nexport const LogoWrapper = styled.div`\r\n  margin-right: 20px;\r\n\r\n  @media screen and (max-width: 649px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const Logo = styled.h1`\r\n  color: ${colors.white};\r\n  font-size: 36px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const ProfileLogoutCartWrapper = styled.div`\r\n  display: flex;\r\n  \r\n  @media screen and (max-width: 649px) {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n`\r\n\r\nexport const ProfileLogoutWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\n\r\nexport const LogoutButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;  \r\n`\r\n\r\nexport const LogoutImg = styled.img`\r\n  width: 25px;  \r\n  height: 25px; \r\n  margin-right: 15px;\r\n`\r\n\r\nexport const UserName = styled.p`\r\n  font-size: 16px;  \r\n  color: ${colors.white};\r\n`\r\n\r\nexport const UserAvatar = styled.img`\r\n  width: 40px;  \r\n  height: 40px; \r\n  border-radius: 50%;\r\n  margin-left: 15px;  \r\n`\r\n\r\nexport const CartWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 20px;  \r\n`\r\n\r\nexport const CartImg = styled(CartIcon)`\r\n  width: 25px;  \r\n  height: 25px; \r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const PurchasesAmountWrapper = styled.div`\r\n  width: 25px;  \r\n  height: 25px;\r\n  border-radius: 50%;\r\n  background: ${colors.white};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n`\r\n\r\nexport const PurchasesAmount = styled.span`\r\n  font-size: 16px;\r\n  color: ${colors.purple};\r\n`\r\n\r\nexport const MiniScreensLogoWrapper = styled.div`\r\n  width: 90%;\r\n  max-width: 1250px;\r\n  padding: 20px 0;\r\n  margin: 0 auto 30px;\r\n  border-bottom: 1px solid ${colors.black};\r\n\r\n  @media screen and (min-width: 650px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const MiniScreensLogo = styled.h1`\r\n  color: ${colors.white};\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  width: fit-content;\r\n`","import HeaderLayout from './HeaderLayout'\r\n\r\nexport default HeaderLayout","import React from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {useHistory, useLocation} from 'react-router-dom'\r\nimport {showConfirmLogoutModal} from 'store'\r\nimport {ConfirmLogoutModal} from 'components'\r\nimport {logoutIcon} from 'assets'\r\n\r\nimport {\r\n  CartImg,\r\n  CartWrapper,\r\n  Header,\r\n  HeaderWrapper,\r\n  Logo,\r\n  LogoutButton,\r\n  LogoutImg,\r\n  LogoWrapper,\r\n  MiniScreensLogo,\r\n  MiniScreensLogoWrapper,\r\n  ProfileLogoutCartWrapper,\r\n  ProfileLogoutWrapper,\r\n  PurchasesAmount,\r\n  PurchasesAmountWrapper,\r\n  UserAvatar,\r\n  UserName\r\n} from './style'\r\n\r\nconst HeaderLayout = ({children}) => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const {totalCount} = useSelector(({cart}) => cart)\r\n  const activeUser = JSON.parse(localStorage.getItem('activeUser'))\r\n\r\n  const goToCartPageHandler = () => {\r\n    if (location.pathname !== '/cart') {\r\n      history.push('/cart')\r\n    }\r\n  }\r\n\r\n  const goToCatalogPageHandler = () => {\r\n    if (location.pathname !== '/catalog') {\r\n      history.push('/catalog')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HeaderWrapper>\r\n        <Header>\r\n          <LogoWrapper>\r\n            <Logo onClick={goToCatalogPageHandler}>\r\n              JS Band Store\r\n            </Logo>\r\n          </LogoWrapper>\r\n          <ProfileLogoutCartWrapper>\r\n            <ProfileLogoutWrapper>\r\n              <LogoutButton onClick={() => dispatch(showConfirmLogoutModal())}>\r\n                <LogoutImg src={logoutIcon} />\r\n              </LogoutButton>\r\n              <UserName>{activeUser.name}</UserName>\r\n              <UserAvatar src={activeUser.avatar} />\r\n            </ProfileLogoutWrapper>\r\n            <CartWrapper>\r\n              <CartImg\r\n                fill=\"#fff\"\r\n                onClick={goToCartPageHandler} />\r\n              <PurchasesAmountWrapper onClick={goToCartPageHandler}>\r\n                <PurchasesAmount>\r\n                  {totalCount > 9 ? '9+' : totalCount}\r\n                </PurchasesAmount>\r\n              </PurchasesAmountWrapper>\r\n            </CartWrapper>\r\n          </ProfileLogoutCartWrapper>\r\n        </Header>\r\n      </HeaderWrapper>\r\n      <MiniScreensLogoWrapper>\r\n        <MiniScreensLogo onClick={goToCatalogPageHandler}>\r\n          JS Band Store\r\n        </MiniScreensLogo>\r\n      </MiniScreensLogoWrapper>\r\n      <ConfirmLogoutModal />\r\n      {children}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default HeaderLayout","import styled from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport const BooksCatalogPageWrapper = styled.div`\r\n  height: calc(100vh - 79px);\r\n  overflow: auto;\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n\r\n  @media screen and (max-width: 650px) {\r\n    height: calc(100vh - 70px);\r\n  }\r\n`\r\n\r\nexport const MainContentWrapper = styled.div`\r\n  width: 90%;\r\n  max-width: 1250px;\r\n  margin: 0 auto 15px;\r\n\r\n  @media screen and (min-width: 650px) {\r\n    padding-top: 20px;\r\n  }\r\n`\r\n\r\nexport const BooksWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n`\r\n\r\nexport const NoBooksWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 50px;\r\n`\r\n\r\nexport const BookImg = styled.img`\r\n  width: 40px;\r\n`\r\n\r\nexport const NoBookMessage = styled.p`\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n`","import BooksCatalogPage from './BooksCatalogPage'\r\n\r\nexport default BooksCatalogPage","import React, {useEffect, useState} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {getAllBooks, startLoading, stopLoading} from 'store'\r\nimport {ErrorBoundary} from 'hoc'\r\nimport {HeaderLayout} from 'layouts'\r\nimport {BookCard, BooksCatalogFilters} from 'components'\r\nimport {bookIcon} from 'assets'\r\nimport {Loader} from 'components/UI'\r\n\r\nimport {\r\n  BookImg,\r\n  BooksCatalogPageWrapper,\r\n  BooksWrapper,\r\n  MainContentWrapper,\r\n  NoBookMessage,\r\n  NoBooksWrapper\r\n} from './style'\r\n\r\nconst BooksCatalogPage = () => {\r\n  const dispatch = useDispatch()\r\n  const {allBooks, isLoading} = useSelector(({books}) => books)\r\n  const [booksForRender, setBooksForRender] = useState([])\r\n\r\n  useEffect(() => {\r\n    dispatch(startLoading())\r\n    dispatch(getAllBooks())\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setBooksForRender(allBooks)\r\n  }, [allBooks])\r\n\r\n  useEffect(() => {\r\n    if (booksForRender.length && isLoading) {\r\n      dispatch(stopLoading())\r\n    }\r\n  }, [booksForRender, isLoading])\r\n\r\n  return (\r\n    <BooksCatalogPageWrapper>\r\n      <HeaderLayout>\r\n        {!isLoading ? (\r\n          <MainContentWrapper>\r\n            <BooksCatalogFilters filterBooksFnc={setBooksForRender} />\r\n            {booksForRender.length ? (\r\n              <BooksWrapper>\r\n                {booksForRender.map(book => (\r\n                  <BookCard key={book.id} book={book} />\r\n                ))}\r\n              </BooksWrapper>\r\n            ) : (\r\n              <NoBooksWrapper>\r\n                <BookImg src={bookIcon} />\r\n                <NoBookMessage>No books</NoBookMessage>\r\n              </NoBooksWrapper>\r\n            )}\r\n          </MainContentWrapper>\r\n        ) : <Loader />}\r\n      </HeaderLayout>\r\n    </BooksCatalogPageWrapper>\r\n  )\r\n}\r\n\r\nexport default ErrorBoundary(BooksCatalogPage)","import styled from 'styled-components'\r\n\r\nexport const BookInfoPageWrapper = styled.div`\r\n  height: calc(100vh - 79px);\r\n  overflow: auto;\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n\r\n  @media screen and (max-width: 650px) {\r\n    height: calc(100vh - 70px);\r\n  }\r\n`\r\n\r\nexport const BookInfoWrapper = styled.div`\r\n  width: 90%;\r\n  max-width: 1250px;\r\n  margin: 20px auto;\r\n`\r\n\r\nexport const BookTitle = styled.h2`\r\n  font-size: 30px;\r\n  margin-bottom: 30px;\r\n  max-height: 90px;\r\n  overflow: auto;\r\n\r\n  @media screen and (max-width: 649px) {\r\n    font-size: 24px;\r\n  }\r\n`\r\n\r\nexport const BookInfoContent = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  @media screen and (max-width: 599px) {\r\n    flex-direction: column;\r\n  }\r\n`\r\n\r\nexport const BookInfoPartWrapper = styled.div`\r\n  width: 47%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  @media screen and (max-width: 990px) {\r\n    flex-direction: column;\r\n  }\r\n\r\n  @media screen and (max-width: 599px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const BookCoverAuthorLevelWrapper = styled.div`\r\n  width: 48%;\r\n\r\n  @media screen and (max-width: 990px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nexport const BookCover = styled.div`\r\n  width: 100%;\r\n  height: 300px;\r\n  background: ${p => `url(\"${p.cover}\") no-repeat 50% 50%/cover`};\r\n\r\n  @media screen and (max-width: 990px) {\r\n    width: 70%;\r\n  }\r\n\r\n  @media screen and (max-width: 690px) {\r\n    width: 100%;\r\n  }\r\n\r\n  @media screen and (max-width: 599px) {\r\n    width: 48%;\r\n  }\r\n\r\n  @media screen and (max-width: 500px) {\r\n    width: 100%;\r\n    max-width: 250px;\r\n    margin: 0 auto;\r\n  }\r\n`\r\n\r\nexport const Author = styled.p`\r\n  font-size: 16px;\r\n  margin-top: 15px;\r\n  font-weight: 600;\r\n  max-height: 70px;\r\n  overflow: auto;\r\n\r\n  @media screen and (max-width: 599px) {\r\n    margin-top: 0;\r\n  }\r\n\r\n  @media screen and (max-width: 500px) {\r\n    margin-top: 20px;\r\n  }\r\n`\r\n\r\nexport const Level = styled.p`\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  margin-top: 10px;\r\n`\r\n\r\nexport const TagsDescriptionWrapper = styled.div`\r\n  width: 48%;\r\n\r\n  @media screen and (max-width: 990px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nexport const Description = styled.p`\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  max-height: 400px;\r\n  overflow: auto;\r\n  margin-top: 10px;\r\n`\r\n\r\nexport const DescriptionLabel = styled.span`\r\n  font-weight: 800;\r\n  margin-right: 5px;\r\n`\r\n\r\nexport const Tags = styled.p`\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  \r\n  @media screen and (max-width: 990px) {\r\n    margin-top: 10px;\r\n  }\r\n`\r\n\r\nexport const BookPriceCountInfoWrapper = styled.div`\r\n  width: 47%;\r\n\r\n  @media screen and (max-width: 599px) {\r\n    margin: 30px auto;\r\n    width: 100%;\r\n    max-width: 400px;\r\n  }\r\n`\r\n\r\nexport const BookMiniInfoPart = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  \r\n  @media screen and (min-width: 600px) {\r\n    display: none;\r\n  }\r\n\r\n  @media screen and (max-width: 500px) {\r\n    flex-direction: column;\r\n  }\r\n`\r\n\r\nexport const BookMiniInfoWrapper = styled.div`\r\n  width: 48%;\r\n\r\n  @media screen and (max-width: 500px) {\r\n    width: 100%;\r\n  }\r\n`","import BookInfoPage from './BookInfoPage'\r\n\r\nexport default BookInfoPage","import React, {useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {useLocation} from 'react-router-dom'\r\nimport {HeaderLayout} from 'layouts'\r\nimport {getCurrentBookInfo} from 'store'\r\nimport {AddedBookToCartModal, BookPriceCountInfo} from 'components'\r\nimport {Loader} from 'components/UI'\r\n\r\nimport {\r\n  Author,\r\n  BookCover,\r\n  BookCoverAuthorLevelWrapper,\r\n  BookInfoContent,\r\n  BookInfoPageWrapper,\r\n  BookInfoPartWrapper,\r\n  BookInfoWrapper,\r\n  BookMiniInfoPart,\r\n  BookMiniInfoWrapper,\r\n  BookPriceCountInfoWrapper,\r\n  BookTitle,\r\n  Description,\r\n  DescriptionLabel,\r\n  Level,\r\n  Tags,\r\n  TagsDescriptionWrapper\r\n} from './style'\r\n\r\nconst BookInfoPage = () => {\r\n  const dispatch = useDispatch()\r\n  const location = useLocation()\r\n  const pathName = location.pathname\r\n  const bookId = pathName.slice(9)\r\n\r\n  const {currentBookInfo, isLoading} = useSelector(({books}) => books)\r\n\r\n  useEffect(() => {\r\n    dispatch(getCurrentBookInfo(bookId))\r\n  }, [])\r\n\r\n  const isCurrentBookEmpty = Object.keys(currentBookInfo).length === 0\r\n\r\n  const BooksAuthorLevel = () => {\r\n    if (!isLoading && !isCurrentBookEmpty) {\r\n      return (\r\n        <>\r\n          <Author>\r\n            <DescriptionLabel>Author:</DescriptionLabel> {currentBookInfo.author}\r\n          </Author>\r\n          <Level>\r\n            <DescriptionLabel>Level:</DescriptionLabel> {currentBookInfo.level}\r\n          </Level>\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  const TagsDescription = () => {\r\n    if (!isLoading && !isCurrentBookEmpty) {\r\n      return (\r\n        <TagsDescriptionWrapper>\r\n          <Tags>\r\n            <DescriptionLabel>Tags:</DescriptionLabel>\r\n            {currentBookInfo.tags.join(', ')}\r\n          </Tags>\r\n          <Description>\r\n            <DescriptionLabel>Description:</DescriptionLabel>\r\n            {currentBookInfo.description}\r\n          </Description>\r\n        </TagsDescriptionWrapper>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <BookInfoPageWrapper>\r\n      <HeaderLayout>\r\n        {!isLoading && !isCurrentBookEmpty ? (\r\n          <>\r\n            <BookInfoWrapper>\r\n              <BookTitle>{currentBookInfo.title}</BookTitle>\r\n              <BookInfoContent>\r\n                <BookInfoPartWrapper>\r\n                  <BookCoverAuthorLevelWrapper>\r\n                    <BookCover cover={currentBookInfo.cover} />\r\n                    <BooksAuthorLevel />\r\n                  </BookCoverAuthorLevelWrapper>\r\n                  <TagsDescription />\r\n                </BookInfoPartWrapper>\r\n                <BookMiniInfoPart>\r\n                  <BookCover cover={currentBookInfo.cover} />\r\n                  <BookMiniInfoWrapper>\r\n                    <BooksAuthorLevel />\r\n                    <TagsDescription />\r\n                  </BookMiniInfoWrapper>\r\n                </BookMiniInfoPart>\r\n                <BookPriceCountInfoWrapper>\r\n                  <BookPriceCountInfo />\r\n                </BookPriceCountInfoWrapper>\r\n              </BookInfoContent>\r\n            </BookInfoWrapper>\r\n            <AddedBookToCartModal />\r\n          </>\r\n        ) : <Loader />}\r\n      </HeaderLayout>\r\n    </BookInfoPageWrapper>\r\n  )\r\n}\r\n\r\nexport default BookInfoPage","import styled from 'styled-components'\r\nimport {ReactComponent as CartIcon} from 'assets/images/cartIcon.svg'\r\n\r\nexport const CartPageWrapper = styled.div`\r\n  height: calc(100vh - 79px);\r\n  overflow: auto;\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n\r\n  @media screen and (max-width: 650px) {\r\n    height: calc(100vh - 70px);\r\n  }\r\n`\r\n\r\nexport const EmptyCartBlockWrapper = styled.div`\r\n  margin-top: 110px;\r\n  text-align: center;\r\n  \r\n  @media screen and (max-width: 649px) {\r\n    margin-top: 70px;\r\n  }\r\n`\r\n\r\nexport const CartImg = styled(CartIcon)`\r\n  width: 40px;\r\n`\r\n\r\nexport const EmptyCartMessage = styled.p`\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  margin-top: 15px;\r\n`\r\n\r\nexport const CartPageContent = styled.div`\r\n  width: 90%;\r\n  max-width: 1250px;\r\n  margin: 0 auto 15px;\r\n\r\n  @media screen and (min-width: 650px) {\r\n    padding-top: 30px;\r\n  }\r\n`\r\n\r\nexport const PurchaseButtonWrapper = styled.div`\r\n  width: fit-content;\r\n  margin-left: calc(100% - 110.88px);\r\n\r\n  @media screen and (max-width: 385px) {\r\n    margin-left: calc(100% - 100.77px);\r\n  }\r\n`\r\n\r\nexport const CartItemsWrapper = styled.div`\r\n  margin-top: 40px;\r\n`\r\n\r\nexport const EmptyTrashTotalCountPriceWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 30px;\r\n  \r\n  @media screen and (max-width: 450px) {\r\n    flex-direction: column-reverse;\r\n    align-items: flex-end;\r\n  }\r\n`\r\n\r\nexport const EmptyTrashButtonWrapper = styled.div`\r\n  width: fit-content;\r\n\r\n  @media screen and (max-width: 450px) {\r\n    margin-top: 15px;\r\n  }\r\n`\r\n\r\nexport const TotalCountPriceWrapper = styled.div`\r\n  display: flex;\r\n`\r\n\r\nexport const TotalCountPrice = styled.p`\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n  margin-left: 15px;\r\n  \r\n  &:first-of-type {\r\n    margin-left: 0;\r\n  }\r\n  \r\n  @media screen and (max-width: 649px) {\r\n    font-size: 14px;\r\n  }\r\n`","import CartPage from './CartPage'\r\n\r\nexport default CartPage","import React from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {HeaderLayout} from 'layouts'\r\nimport {purchase, showConfirmClearCartModal} from 'store'\r\nimport {CartItem, ConfirmClearCartModal, PurchaseModal} from 'components'\r\nimport {Button, Loader} from 'components/UI'\r\n\r\nimport {\r\n  CartImg,\r\n  CartItemsWrapper,\r\n  CartPageContent,\r\n  CartPageWrapper,\r\n  EmptyCartBlockWrapper,\r\n  EmptyCartMessage,\r\n  EmptyTrashButtonWrapper,\r\n  EmptyTrashTotalCountPriceWrapper,\r\n  PurchaseButtonWrapper,\r\n  TotalCountPrice,\r\n  TotalCountPriceWrapper\r\n} from './style'\r\n\r\nconst CartPage = () => {\r\n  const dispatch = useDispatch()\r\n  const {addedBooks, totalCount, totalPrice, isLoading} = useSelector(({cart}) => cart)\r\n\r\n  const addedBooksToCartArr = Object.entries(addedBooks).map(book => {\r\n    book[1].id = book[0]\r\n    return book[1]\r\n  })\r\n\r\n  return (\r\n    <CartPageWrapper>\r\n      <HeaderLayout>\r\n        {!isLoading ? (\r\n          <CartPageContent>\r\n            {addedBooksToCartArr.length ? (\r\n              <>\r\n                <PurchaseButtonWrapper>\r\n                  <Button\r\n                    btnType=\"purple\"\r\n                    onClick={() => dispatch(purchase(addedBooksToCartArr))}>\r\n                    Purchase\r\n                  </Button>\r\n                </PurchaseButtonWrapper>\r\n                <CartItemsWrapper>\r\n                  {addedBooksToCartArr.map(book => {\r\n                    return (\r\n                      <CartItem\r\n                        key={book.id}\r\n                        allBooks={addedBooksToCartArr}\r\n                        book={book} />\r\n                    )\r\n                  })}\r\n                </CartItemsWrapper>\r\n                <EmptyTrashTotalCountPriceWrapper>\r\n                  <EmptyTrashButtonWrapper>\r\n                    <Button\r\n                      btnType=\"purple\"\r\n                      onClick={() => dispatch(showConfirmClearCartModal())}>\r\n                      Empty Trash\r\n                    </Button>\r\n                  </EmptyTrashButtonWrapper>\r\n                  <TotalCountPriceWrapper>\r\n                    <TotalCountPrice>Total count: {totalCount}</TotalCountPrice>\r\n                    <TotalCountPrice>Total price: {totalPrice}$</TotalCountPrice>\r\n                  </TotalCountPriceWrapper>\r\n                </EmptyTrashTotalCountPriceWrapper>\r\n                <ConfirmClearCartModal />\r\n              </>\r\n            ) : (\r\n              <EmptyCartBlockWrapper>\r\n                <CartImg fill=\"#464646\" />\r\n                <EmptyCartMessage>Cart empty...</EmptyCartMessage>\r\n              </EmptyCartBlockWrapper>\r\n            )}\r\n          </CartPageContent>\r\n        ) : <Loader />}\r\n        <PurchaseModal />\r\n      </HeaderLayout>\r\n    </CartPageWrapper>\r\n  )\r\n}\r\n\r\nexport default CartPage","import styled from 'styled-components'\r\n\r\nexport const NotFountPageWrapper = styled.div`\r\n  position: absolute;\r\n  width: 100vw;\r\n  top: 40%;  \r\n  padding: 0 20px;\r\n  box-sizing: border-box;\r\n`\r\n\r\nexport const Message = styled.h2`\r\n  font-size: 25px;\r\n  font-weight: 700;\r\n  text-align: center;\r\n`","import NotFountPage from './NotFountPage'\r\n\r\nexport default NotFountPage","import React, {useEffect} from 'react'\r\nimport {useSelector} from 'react-redux'\r\nimport {useHistory, useLocation} from 'react-router-dom'\r\n\r\nimport {NotFountPageWrapper, Message} from './style'\r\n\r\nconst NotFountPage = () => {\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const {isLoggedIn} = useSelector(({login}) => login)\r\n  const rootPathName = location.pathname.slice(0, 8)\r\n\r\n  useEffect(() => {\r\n    if (location.pathname === '/' || location.pathname === '/login' && isLoggedIn) {\r\n      history.push('/catalog')\r\n    } else if (rootPathName === '/catalog' && !isLoggedIn || location.pathname === '/cart') {\r\n      history.push('/login')\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <NotFountPageWrapper>\r\n      <Message>Oooops... Page is not found. Maybe it is not what you are searching</Message>\r\n    </NotFountPageWrapper>\r\n  )\r\n}\r\n\r\nexport default NotFountPage","import React from 'react'\r\nimport {useSelector} from 'react-redux'\r\nimport {Switch, Route} from 'react-router-dom'\r\n\r\nimport {\r\n  LoginPage,\r\n  BooksCatalogPage,\r\n  BookInfoPage,\r\n  CartPage,\r\n  NotFountPage\r\n} from 'pages'\r\n\r\nfunction App() {\r\n  const {isLoggedIn} = useSelector(({login}) => login)\r\n\r\n  if (!isLoggedIn) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/login\" component={LoginPage} />\r\n        <Route component={NotFountPage} />\r\n      </Switch>\r\n    )\r\n  } else {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/cart\" component={CartPage} />\r\n        <Route path=\"/catalog/:id\" component={BookInfoPage} />\r\n        <Route path=\"/catalog\" component={BooksCatalogPage} />\r\n        <Route component={NotFountPage} />\r\n      </Switch>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App","import {createGlobalStyle} from 'styled-components'\r\nimport {colors} from 'assets'\r\n\r\nexport default createGlobalStyle`\r\n  * {\r\n    font-family: 'Open Sans', sans-serif;\r\n    padding: 0;\r\n    margin: 0;\r\n    outline: none;\r\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n  }\r\n\r\n  body,\r\n  select,\r\n  button {\r\n    color: ${colors.black};\r\n    background: ${colors.global};\r\n  }\r\n  \r\n  ::-webkit-scrollbar {\r\n    width: 5px;\r\n    height: 8px;\r\n    background-color: rgba(0, 0, 0, .1);\r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background-color: rgba(0, 0, 0, .4);\r\n  }\r\n`","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry)\r\n      getFID(onPerfEntry)\r\n      getFCP(onPerfEntry)\r\n      getLCP(onPerfEntry)\r\n      getTTFB(onPerfEntry)\r\n    })\r\n  }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport {BrowserRouter} from 'react-router-dom'\r\nimport {applyMiddleware, compose, createStore} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport {rootReducer} from 'store'\r\nimport App from './App'\r\nimport GlobalStyles from './globalStyles'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nconst store = createStore(rootReducer, compose(\r\n  applyMiddleware(thunk),\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() || compose\r\n))\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <GlobalStyles />\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\nreportWebVitals()"],"sourceRoot":""}